<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ezp-next: eZ\Publish\Core\Persistence\InMemory\Backend Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ezp-next
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">eZ\Publish\Core\Persistence\InMemory\Backend Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae518d0461df0a126aee9ca8e1fbeb7cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#ae518d0461df0a126aee9ca8e1fbeb7cc">__construct</a> (array $data)</td></tr>
<tr class="memitem:adc0641c199d31a6c90bf95f1e2e45a1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#adc0641c199d31a6c90bf95f1e2e45a1a">create</a> ($type, array $data, $autoIncrement=true, $idColumn= 'id')</td></tr>
<tr class="memitem:a0ab9670c020a50f2d30f60075bd46c67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a0ab9670c020a50f2d30f60075bd46c67">load</a> ($type, $id, $idColumn= 'id')</td></tr>
<tr class="memitem:af85bbf9143b103d17fc47ce5cf5f81cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#af85bbf9143b103d17fc47ce5cf5f81cf">find</a> ($type, array $match=array(), array $joinInfo=array())</td></tr>
<tr class="memitem:ae796d1984e31f2a7ec5112918a59e738"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#ae796d1984e31f2a7ec5112918a59e738">update</a> ($type, $id, array $data, $union=true, $idColumn= 'id')</td></tr>
<tr class="memitem:a3ec1f48513858e5a71d911a0ba806d4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a3ec1f48513858e5a71d911a0ba806d4d">updateByMatch</a> ($type, array $match, array $data, $union=true, $idColumn= 'id')</td></tr>
<tr class="memitem:a605852fe9cbce201a5f44e8c3adecd5b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a605852fe9cbce201a5f44e8c3adecd5b">delete</a> ($type, $id, $idColumn= 'id')</td></tr>
<tr class="memitem:a7ae28ab69f063b64f28b93e50bbec410"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a7ae28ab69f063b64f28b93e50bbec410">deleteByMatch</a> ($type, array $match)</td></tr>
<tr class="memitem:a2a2ae06ba0f486e6dcb61bab78a8bb01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a2a2ae06ba0f486e6dcb61bab78a8bb01">count</a> ($type, array $match=array(), array $joinInfo=array())</td></tr>
<tr class="memitem:a87e16dd8e5d22fc67bb766ad8cac4ead"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a87e16dd8e5d22fc67bb766ad8cac4ead">beginTransaction</a> ()</td></tr>
<tr class="memitem:aea4338a8183197ac31f6372c1188fc52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#aea4338a8183197ac31f6372c1188fc52">commit</a> ()</td></tr>
<tr class="memitem:a6f2bd36e88bd2fe3be1d645c2bd2b951"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a6f2bd36e88bd2fe3be1d645c2bd2b951">rollback</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:acb628adcf68c6e0f27135b4301019e8b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b">rawFind</a> ($type, array $match=array(), array $joinInfo=array())</td></tr>
<tr class="memitem:aa90ec5690d6796b0f07d5b2fa765171a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#aa90ec5690d6796b0f07d5b2fa765171a">getFieldTypeNamespace</a> ($obj)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a396388ec12e4d174b7840cd7319c5bf8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a> = array()</td></tr>
<tr class="memitem:afe77cddcd5a3e4219116e775595adf26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#afe77cddcd5a3e4219116e775595adf26">$transactionDataStack</a> = array()</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The Storage Engine backend for in memory storage Reads input from js files in provided directory and fills in memory db store.</p>
<p>The in memory db store and also json representation have a one to one mapping to defined value objects. But only their plain properties, associations are not handled and all data is stored in separate "buckets" similar to how it would be in a RDBMS servers. </p>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00026">26</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae518d0461df0a126aee9ca8e1fbeb7cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::__construct </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct backend and assign data</p>
<p>Use: new <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html">Backend</a>( json_decode( file_get_contents( <b>DIR</b> . '/data.json' ), true ) );</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>Data where key is type like "Content" or "Content\\Type" which then have to map to Value objects in <a class="el" href="namespaceeZ.html">eZ</a>*, data is an array of hash values with same structure as the corresponding value object. Foreign keys: In some cases value objects does not contain these as they are internal, so this needs to be handled in <a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory.html">InMemory</a> handlers by assigning keys like "_typeId" on Type hash values for instance. These will be stored and can be matched with <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#af85bbf9143b103d17fc47ce5cf5f81cf">find()</a>, but will not be returned as part of VO so purely internal. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00056">56</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00031">eZ\Publish\Core\Persistence\InMemory\Backend\$data</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $this-&gt;data = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a> + <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$this-&gt;data</a>;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a87e16dd8e5d22fc67bb766ad8cac4ead"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::beginTransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Begin transaction</p>
<p>Begins an transaction, make sure you'll call commit or rollback when done, otherwise work will be lost. </p>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00315">315</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00031">eZ\Publish\Core\Persistence\InMemory\Backend\$data</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// copy current data to transaction stack</span></div>
<div class="line">        $this-&gt;transactionDataStack[] = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$this-&gt;data</a>;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea4338a8183197ac31f6372c1188fc52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Commit transaction</p>
<p>Commit transaction, or throw exceptions if no transactions has been started.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\RuntimeException</td><td>If no transaction has been started </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00328">328</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( empty( $this-&gt;transactionDataStack ) )</div>
<div class="line">            <span class="keywordflow">throw</span> new \RuntimeException( <span class="stringliteral">&quot;No transactions in progress&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// remove one level of data from transaction stack</span></div>
<div class="line">        array_pop( $this-&gt;transactionDataStack );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2a2ae06ba0f486e6dcb61bab78a8bb01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::count </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$match</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$joinInfo</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find count of objects of a given type matching a simple $match (empty array will match all)</p>
<p>Note does not support joins, so only properties on $type is matched.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$match</td><td>A flat array with property =&gt; value to match against </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$joinInfo</td><td>See <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#af85bbf9143b103d17fc47ce5cf5f81cf">find()</a></td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b">rawFind()</a></p>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00304">304</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00366">eZ\Publish\Core\Persistence\InMemory\Backend\rawFind()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a2a2ae06ba0f486e6dcb61bab78a8bb01">count</a>( $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b">rawFind</a>( $type, $match, $joinInfo ) );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a2a2ae06ba0f486e6dcb61bab78a8bb01_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a2a2ae06ba0f486e6dcb61bab78a8bb01_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a2a2ae06ba0f486e6dcb61bab78a8bb01_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a2a2ae06ba0f486e6dcb61bab78a8bb01_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\rawFind" alt="" coords="257,5,457,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adc0641c199d31a6c90bf95f1e2e45a1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::create </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$autoIncrement</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$idColumn</em> = <code>'id'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates data in in memory store</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$autoIncrement</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$idColumn</td><td>By default, id column is 'id', but this can be customized here (e.g. for 'contentId')</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>object </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentValue</td><td>On invalid $type </td></tr>
    <tr><td class="paramname">LogicException</td><td>If $autoIncrement is false but $data does not include an id </td></tr>
    <tr><td class="paramname">LogicException</td><td>If provided id already exists (and if defined, data contain same status property value) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00074">74</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00031">eZ\Publish\Core\Persistence\InMemory\Backend\$data</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_scalar( $type ) || !isset( $this-&gt;data[$type] ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&#39;type&#39;</span>, $type );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $autoIncrement )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>[$idColumn] = $this-&gt;getNextId( $type, $idColumn );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>[$idColumn] )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> LogicException( <span class="charliteral">&#39;\&#39;</span><a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#adc0641c199d31a6c90bf95f1e2e45a1a">create</a>\<span class="stringliteral">&#39; logic error, $autoIncrement is false but no id is provided&#39;</span> );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> ( $this-&gt;data[$type] as $item )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (</div>
<div class="line">                <span class="comment">// Same identifier</span></div>
<div class="line">                $item[$idColumn] == <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>[$idColumn] &amp;&amp;</div>
<div class="line">                (</div>
<div class="line">                    <span class="comment">// and &quot;status&quot; matches</span></div>
<div class="line">                    ( isset( $item[<span class="stringliteral">&#39;status&#39;</span>] ) &amp;&amp; $item[<span class="stringliteral">&#39;status&#39;</span>] == <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>[<span class="stringliteral">&#39;status&#39;</span>] ) ||</div>
<div class="line">                    <span class="comment">// or &quot;_status&quot; matches</span></div>
<div class="line">                    ( isset( $item[<span class="stringliteral">&#39;_status&#39;</span>] ) &amp;&amp; $item[<span class="stringliteral">&#39;_status&#39;</span>] == <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>[<span class="stringliteral">&#39;_status&#39;</span>] ) ||</div>
<div class="line">                    <span class="comment">// or no status available</span></div>
<div class="line">                    !( isset( $item[<span class="stringliteral">&#39;status&#39;</span>] ) || isset( $item[<span class="stringliteral">&#39;_status&#39;</span>] ) )</div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">                <span class="keywordflow">throw</span> <span class="keyword">new</span> LogicException( <span class="stringliteral">&quot;&#39;create&#39; logic error, provided id already exist&quot;</span> );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/*foreach ( $data as $prop =&gt; $value )</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            if ( $value === null )</span></div>
<div class="line"><span class="comment">                throw new InvalidArgumentValue( &#39;data&#39;, &quot;&#39;$prop&#39; on &#39;$type&#39; was of value NULL&quot; );</span></div>
<div class="line"><span class="comment">        }*/</span></div>
<div class="line"></div>
<div class="line">        $this-&gt;data[$type][] = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>;</div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;toValue( $type, <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a> );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a605852fe9cbce201a5f44e8c3adecd5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::delete </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$idColumn</em> = <code>'id'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes data in in memory store</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">int&#160;|&#160;string</td><td class="paramname">$id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\NotFoundException</td><td>If data does not exist  <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a7ae28ab69f063b64f28b93e50bbec410">deleteByMatch()</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00255">255</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00272">eZ\Publish\Core\Persistence\InMemory\Backend\deleteByMatch()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a7ae28ab69f063b64f28b93e50bbec410">deleteByMatch</a>( $type, array( $idColumn =&gt; $id ) );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a605852fe9cbce201a5f44e8c3adecd5b_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a605852fe9cbce201a5f44e8c3adecd5b_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a605852fe9cbce201a5f44e8c3adecd5b_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a605852fe9cbce201a5f44e8c3adecd5b_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a7ae28ab69f063b64f28b93e50bbec410" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\deleteByMatch" alt="" coords="257,5,503,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7ae28ab69f063b64f28b93e50bbec410"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::deleteByMatch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$match</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes data in in memory store</p>
<p>Useful in cases where a specific state of an object should be updated, Type with version=0 for instance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$match</td><td>A flat array with property =&gt; value to match against</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentValue</td><td>On invalid $type </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\NotFoundException</td><td>If no data to delete have been found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00272">272</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_scalar( $type ) || !isset( $this-&gt;data[$type] ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&#39;type&#39;</span>, $type );</div>
<div class="line"></div>
<div class="line">        $found = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $this-&gt;data[$type] as $key =&gt; $item )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( $this-&gt;match( $item, $match ) )</div>
<div class="line">            {</div>
<div class="line">                unset( $this-&gt;data[$type][$key] );</div>
<div class="line">                $found = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !$found )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> NotFound( $type, $match );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a7ae28ab69f063b64f28b93e50bbec410_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a7ae28ab69f063b64f28b93e50bbec410_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a7ae28ab69f063b64f28b93e50bbec410_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a7ae28ab69f063b64f28b93e50bbec410_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a605852fe9cbce201a5f44e8c3adecd5b" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\delete" alt="" coords="303,5,503,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af85bbf9143b103d17fc47ce5cf5f81cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::find </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$match</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$joinInfo</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find data from in memory store for a specific type that matches $match (empty array will match all)</p>
<p>Note does not support joins, so only properties on $type is matched.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$match</td><td>A multi level array with property =&gt; value to match against </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$joinInfo</td><td>Optional info on how to join in other objects to become part of a aggregate where $type is root. Format: array( '&lt;property&gt;' =&gt; array( 'type' =&gt; '&lt;foreign-type&gt;', 'match' =&gt; array( '&lt;foreign-key-property&gt;' =&gt; '&lt;key-property&gt;' ) ), ['sub' =&gt; &lt; $joininfo&gt;=""&gt;] ) Example (joining Location when finding Content): array( 'locations' =&gt; array( 'type' =&gt; 'Content\Location', 'match' =&gt; array( 'contentId' =&gt; 'id' ) ) ) Value of 'sub' follows exactly same format as $joinInfo allowing recursive joining.  <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b">rawFind()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>object[] </dd></dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00176">176</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00366">eZ\Publish\Core\Persistence\InMemory\Backend\rawFind()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $items = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b">rawFind</a>( $type, $match, $joinInfo );</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $items as $key =&gt; $item )</div>
<div class="line">            $items[$key] = $this-&gt;toValue( $type, $item, $joinInfo );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $items;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_af85bbf9143b103d17fc47ce5cf5f81cf_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_af85bbf9143b103d17fc47ce5cf5f81cf_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_af85bbf9143b103d17fc47ce5cf5f81cf_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_af85bbf9143b103d17fc47ce5cf5f81cf_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\rawFind" alt="" coords="257,5,457,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa90ec5690d6796b0f07d5b2fa765171a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::getFieldTypeNamespace </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\ValueObject</td><td class="paramname">$obj</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00615">615</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( isset( $this-&gt;tempFieldTypeMapping[ $obj-&gt;type ] ) )</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;tempFieldTypeMapping[ $obj-&gt;type ];</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">throw</span> new \Exception( <span class="stringliteral">&quot;Following FieldType is not supported by InMemory storage {$obj-&gt;type}&quot;</span> );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0ab9670c020a50f2d30f60075bd46c67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::load </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$idColumn</em> = <code>'id'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads data from in memory store</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">int&#160;|&#160;string</td><td class="paramname">$id</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$idColumn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>object </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\Core\Base\Exceptions\InvalidArgumentValue</td><td>On invalid $type </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\NotFoundException</td><td>If data does not exist </td></tr>
    <tr><td class="paramname">LogicException</td><td>If several items exists with same id </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00127">127</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_scalar( $type ) || !isset( $this-&gt;data[$type] ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&#39;type&#39;</span>, $type );</div>
<div class="line"></div>
<div class="line">        $return = null;</div>
<div class="line">        $found = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $this-&gt;data[$type] as $item )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( $item[$idColumn] != $id )</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ( $return )</div>
<div class="line">                <span class="keywordflow">throw</span> <span class="keyword">new</span> LogicException( <span class="stringliteral">&quot;Logic error, more than one item exist with id: {$id}&quot;</span> );</div>
<div class="line"></div>
<div class="line">            $return = $this-&gt;toValue( $type, $item );</div>
<div class="line">            $found = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !$found )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> NotFound( $type, $id );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $return;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acb628adcf68c6e0f27135b4301019e8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::rawFind </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$match</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$joinInfo</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find data from in memory store for a specific type that matches $match (empty array will match all)</p>
<p>Note does not support joins, so only properties on $type is matched.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$match</td><td>A multi level array with property =&gt; value to match against </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$joinInfo</td><td>See <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#af85bbf9143b103d17fc47ce5cf5f81cf">find()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array[] </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentValue</td><td>On invalid $type </td></tr>
    <tr><td class="paramname">LogicException</td><td>When there is a collision between match rules in $joinInfo and $match </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00366">366</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_scalar( $type ) || !isset( $this-&gt;data[$type] ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&#39;type&#39;</span>, $type );</div>
<div class="line"></div>
<div class="line">        $items = array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $this-&gt;data[$type] as $item )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">foreach</span> ( $joinInfo as $joinProperty =&gt; $joinItem )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">foreach</span> ( $joinItem[<span class="stringliteral">&#39;match&#39;</span>] as $joinMatchKey =&gt; $joinMatchProperty )</div>
<div class="line">                {</div>
<div class="line">                    $joinItem[<span class="stringliteral">&#39;match&#39;</span>][$joinMatchKey] = $item[$joinMatchProperty];</div>
<div class="line">                    <span class="keywordflow">if</span> ( isset( $match[$joinProperty][$joinMatchKey] ) )</div>
<div class="line">                        <span class="keywordflow">throw</span> <span class="keyword">new</span> LogicException( <span class="stringliteral">&quot;\$match[$joinProperty][$joinMatchKey] logic error, collision with match in \$joinInfo&quot;</span> );</div>
<div class="line">                }</div>
<div class="line">                $item[$joinProperty] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#acb628adcf68c6e0f27135b4301019e8b">rawFind</a>(</div>
<div class="line">                    $joinItem[<span class="stringliteral">&#39;type&#39;</span>],</div>
<div class="line">                    $joinItem[<span class="stringliteral">&#39;match&#39;</span>],</div>
<div class="line">                    ( isset( $joinItem[<span class="stringliteral">&#39;sub&#39;</span>] ) ? $joinItem[<span class="stringliteral">&#39;sub&#39;</span>] : array() )</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> ( $this-&gt;match( $item, $match ) )</div>
<div class="line">                $items[] = $item;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $items;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_acb628adcf68c6e0f27135b4301019e8b_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_acb628adcf68c6e0f27135b4301019e8b_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_acb628adcf68c6e0f27135b4301019e8b_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_acb628adcf68c6e0f27135b4301019e8b_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#af85bbf9143b103d17fc47ce5cf5f81cf" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\find" alt="" coords="257,5,457,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a2a2ae06ba0f486e6dcb61bab78a8bb01" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\count" alt="" coords="257,74,457,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6f2bd36e88bd2fe3be1d645c2bd2b951"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::rollback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback transaction</p>
<p>Rollback transaction, or throw exceptions if no transactions has been started.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\RuntimeException</td><td>If no transaction has been started </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00344">344</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( empty( $this-&gt;transactionDataStack ) )</div>
<div class="line">            <span class="keywordflow">throw</span> new \RuntimeException( <span class="stringliteral">&quot;No transactions in progress&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// pop last data set from transaction stack back to live $data set to wipe out changes</span></div>
<div class="line">        $this-&gt;data = array_pop( $this-&gt;transactionDataStack );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae796d1984e31f2a7ec5112918a59e738"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::update </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$union</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$idColumn</em> = <code>'id'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates data in in memory store</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">int&#160;|&#160;string</td><td class="paramname">$id</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$union</td><td>Specifies if data should be merged with existing data or not</td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a3ec1f48513858e5a71d911a0ba806d4d">updateByMatch()</a></p>
<dl class="section return"><dt>Returns</dt><dd>boolean False if data does not exist and can not be updated </dd></dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00197">197</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00217">eZ\Publish\Core\Persistence\InMemory\Backend\updateByMatch()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a3ec1f48513858e5a71d911a0ba806d4d">updateByMatch</a>( $type, array( $idColumn =&gt; $id ), <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>, $union, $idColumn );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_ae796d1984e31f2a7ec5112918a59e738_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_ae796d1984e31f2a7ec5112918a59e738_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_ae796d1984e31f2a7ec5112918a59e738_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_ae796d1984e31f2a7ec5112918a59e738_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a3ec1f48513858e5a71d911a0ba806d4d" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\updateByMatch" alt="" coords="257,5,508,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ec1f48513858e5a71d911a0ba806d4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::updateByMatch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$union</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$idColumn</em> = <code>'id'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates data in in memory store by match</p>
<p>Useful in cases where a specific state of an object should be updated, Type with version=0 for instance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$match</td><td>A flat array with property =&gt; value to match against </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$union</td><td>Specifies if data should be merged with existing data or not</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentValue</td><td>On invalid $type</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean False if data does not exist and can not be updated </dd></dl>

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00217">217</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

<p>References <a class="el" href="Backend_8php_source.html#l00031">eZ\Publish\Core\Persistence\InMemory\Backend\$data</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_scalar( $type ) || !isset( $this-&gt;data[$type] ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&#39;type&#39;</span>, $type );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Make sure id isn&#39;t changed</span></div>
<div class="line">        unset( <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>[$idColumn] );</div>
<div class="line"></div>
<div class="line">        <span class="comment">/*foreach ( $data as $prop =&gt; $value )</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            if ( $value === null )</span></div>
<div class="line"><span class="comment">                throw new InvalidArgumentValue( &#39;data&#39;, &quot;&#39;$prop&#39; on &#39;$type&#39; was of value NULL&quot; );</span></div>
<div class="line"><span class="comment">        }*/</span></div>
<div class="line"></div>
<div class="line">        $return = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $this-&gt;data[$type] as $key =&gt; $item )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( $this-&gt;match( $item, $match ) )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> ( $union )</div>
<div class="line">                    $this-&gt;data[$type][$key] = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a> + $this-&gt;data[$type][$key];</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    $this-&gt;data[$type][$key] = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#a396388ec12e4d174b7840cd7319c5bf8">$data</a>;</div>
<div class="line">                $return = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $return;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a3ec1f48513858e5a71d911a0ba806d4d_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a3ec1f48513858e5a71d911a0ba806d4d_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a3ec1f48513858e5a71d911a0ba806d4d_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend_a3ec1f48513858e5a71d911a0ba806d4d_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html#ae796d1984e31f2a7ec5112918a59e738" title="eZ\\Publish\\Core\\Persistence\l\\InMemory\\Backend\\update" alt="" coords="308,5,508,51"/></map>
</div>
</p>

</div>
</div>
<h2>Member Data Documentation</h2>
<a class="anchor" id="a396388ec12e4d174b7840cd7319c5bf8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::$data = array()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00031">31</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

</div>
</div>
<a class="anchor" id="afe77cddcd5a3e4219116e775595adf26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\InMemory\Backend::$transactionDataStack = array()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Backend_8php_source.html#l00040">40</a> of file <a class="el" href="Backend_8php_source.html">Backend.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/var/lib/jenkins/jobs/PAPI-doxygen-master/workspace/eZ/Publish/Core/Persistence/InMemory/<a class="el" href="Backend_8php_source.html">Backend.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceeZ.html">eZ</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish.html">Publish</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core.html">Core</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence.html">Persistence</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory.html">InMemory</a></li><li class="navelem"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1InMemory_1_1Backend.html">Backend</a></li>
    <li class="footer">Generated on Mon Dec 3 2012 11:24:54 for ezp-next by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
