<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ezp-next: eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ezp-next
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase__inherit__graph.png" border="0" usemap="#eZ_0CPublish_0CCore_0CPersistence_0CLegacy_0CContent_0CLocation_0CGateway_0CEzcDatabase_inherit__map" alt="Inheritance graph"/></div>
<map name="eZ_0CPublish_0CCore_0CPersistence_0CLegacy_0CContent_0CLocation_0CGateway_0CEzcDatabase_inherit__map" id="eZ_0CPublish_0CCore_0CPersistence_0CLegacy_0CContent_0CLocation_0CGateway_0CEzcDatabase_inherit__map">
<area shape="rect" id="node2" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway" alt="" coords="5,5,205,69"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase__coll__graph.png" border="0" usemap="#eZ_0CPublish_0CCore_0CPersistence_0CLegacy_0CContent_0CLocation_0CGateway_0CEzcDatabase_coll__map" alt="Collaboration graph"/></div>
<map name="eZ_0CPublish_0CCore_0CPersistence_0CLegacy_0CContent_0CLocation_0CGateway_0CEzcDatabase_coll__map" id="eZ_0CPublish_0CCore_0CPersistence_0CLegacy_0CContent_0CLocation_0CGateway_0CEzcDatabase_coll__map">
<area shape="rect" id="node2" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway" alt="" coords="5,5,205,69"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a44e8eefbfbbe6e6c73408f00f1501592"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a44e8eefbfbbe6e6c73408f00f1501592">__construct</a> (<a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1EzcDbHandler.html">EzcDbHandler</a> $handler)</td></tr>
<tr class="memitem:a1e70eed6217374cea625376798b1f7bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a1e70eed6217374cea625376798b1f7bd">getBasicNodeData</a> ($nodeId)</td></tr>
<tr class="memitem:ac3d89cd7cf8613b25e10460ece0572a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#ac3d89cd7cf8613b25e10460ece0572a3">getBasicNodeDataByRemoteId</a> ($remoteId)</td></tr>
<tr class="memitem:abf344b5d58942c6bccbaf4beccbec259"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#abf344b5d58942c6bccbaf4beccbec259">loadLocationDataByContent</a> ($contentId, $rootLocationId=null)</td></tr>
<tr class="memitem:adb7ebc8368328a1d0dcc0550376bb4c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#adb7ebc8368328a1d0dcc0550376bb4c3">getSubtreeContent</a> ($sourceId)</td></tr>
<tr class="memitem:a25027ed956211c936548aad36dcd15de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a25027ed956211c936548aad36dcd15de">getChildren</a> ($locationId)</td></tr>
<tr class="memitem:a377be6fd307a1a0534c6d7195edc3f5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a377be6fd307a1a0534c6d7195edc3f5c">updateSubtreeModificationTime</a> ($pathString, $timestamp=null)</td></tr>
<tr class="memitem:a49eccd3eba0ae6d4d40cfa46a6e1c0fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a49eccd3eba0ae6d4d40cfa46a6e1c0fd">hideSubtree</a> ($pathString)</td></tr>
<tr class="memitem:a1ffe7d730eaacc30cc1c7f06e39e0eb7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a1ffe7d730eaacc30cc1c7f06e39e0eb7">unHideSubtree</a> ($pathString)</td></tr>
<tr class="memitem:a03e4bada21b7dc6b05092e03141e043a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a03e4bada21b7dc6b05092e03141e043a">swap</a> ($locationId1, $locationId2)</td></tr>
<tr class="memitem:ad5ad15be9607e4cd783c232954c47313"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#ad5ad15be9607e4cd783c232954c47313">createNodeAssignment</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location_1_1CreateStruct.html">CreateStruct</a> $createStruct, $parentNodeId, $type=self::NODE_ASSIGNMENT_OP_CODE_CREATE_NOP)</td></tr>
<tr class="memitem:ae127017bd8de44acff8f38813d57a858"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#ae127017bd8de44acff8f38813d57a858">deleteNodeAssignment</a> ($contentId, $versionNo=null)</td></tr>
<tr class="memitem:a4ab25960f00c0bbcfe6ef19310434329"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a4ab25960f00c0bbcfe6ef19310434329">updateNodeAssignment</a> ($contentObjectId, $oldParent, $newParent, $opcode)</td></tr>
<tr class="memitem:a67a67dc42da8a300a642d07cfc7e572a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a67a67dc42da8a300a642d07cfc7e572a">createLocationsFromNodeAssignments</a> ($contentId, $versionNo)</td></tr>
<tr class="memitem:af5fe6a91b88b33b6c381a6e8a38c1c86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#af5fe6a91b88b33b6c381a6e8a38c1c86">updateLocationsContentVersionNo</a> ($contentId, $versionNo)</td></tr>
<tr class="memitem:ad282140b7250c0874a5786ec24dd1eca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#ad282140b7250c0874a5786ec24dd1eca">update</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location_1_1UpdateStruct.html">UpdateStruct</a> $location, $locationId)</td></tr>
<tr class="memitem:a47fd1e6d822f0dce624e14a95534d7ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a47fd1e6d822f0dce624e14a95534d7ac">removeLocation</a> ($locationId)</td></tr>
<tr class="memitem:a3228c855d294c791fb6dfb175102d5f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a3228c855d294c791fb6dfb175102d5f0">getFallbackMainNodeData</a> ($contentId, $locationId)</td></tr>
<tr class="memitem:a551a5fce04fc5268441f427e46aafeaa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a551a5fce04fc5268441f427e46aafeaa">untrashLocation</a> ($locationId, $newParentId=null)</td></tr>
<tr class="memitem:ad0a13da10246e6623b3a5406ecc87e96"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#ad0a13da10246e6623b3a5406ecc87e96">loadTrashByLocation</a> ($locationId)</td></tr>
<tr class="memitem:a403ef4edef2b33dff513b3a51271dd4a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a403ef4edef2b33dff513b3a51271dd4a">listTrashed</a> ($offset, $limit, array $sort=null)</td></tr>
<tr class="memitem:afd5dd53c0967e1d6ae80a85db4eafa23"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#afd5dd53c0967e1d6ae80a85db4eafa23">cleanupTrash</a> ()</td></tr>
<tr class="memitem:ac6ac8e042de3b8067e1dd61d4ba76fa7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#ac6ac8e042de3b8067e1dd61d4ba76fa7">removeElementFromTrash</a> ($id)</td></tr>
<tr class="memitem:a9572a5edebb7a98e5a99801acffa553a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a9572a5edebb7a98e5a99801acffa553a">setSectionForSubtree</a> ($pathString, $sectionId)</td></tr>
<tr class="memitem:abb8a40834a1506fa8031024551103976"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#abb8a40834a1506fa8031024551103976">countLocationsByContentId</a> ($contentId)</td></tr>
<tr class="memitem:a572126c5189fed960a04821c0a82817c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#a572126c5189fed960a04821c0a82817c">changeMainLocation</a> ($contentId, $locationId, $versionNo, $parentLocationId)</td></tr>
<tr class="inherit_header pub_methods_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway')"><img src="closed.png" alt="-"/>&nbsp;Public Member Functions inherited from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a></td></tr>
<tr class="memitem:a2db35ad833e723f55e7c4e8c8af4dc20 inherit pub_methods_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a2db35ad833e723f55e7c4e8c8af4dc20">moveSubtreeNodes</a> ($fromPathString, $toPathString)</td></tr>
<tr class="memitem:a4fd04e7e386a8ecc073c3916a0306ac2 inherit pub_methods_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a4fd04e7e386a8ecc073c3916a0306ac2">create</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location_1_1CreateStruct.html">CreateStruct</a> $createStruct, array $parentNode)</td></tr>
<tr class="memitem:ac14446521d0a4777906d72a462d4f901 inherit pub_methods_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#ac14446521d0a4777906d72a462d4f901">updatePathIdentificationString</a> ($locationId, $parentLocationId, $text)</td></tr>
<tr class="memitem:a009059bbeeb9acab14ff531ec8b0cc4a inherit pub_methods_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a009059bbeeb9acab14ff531ec8b0cc4a">trashLocation</a> ($locationId)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aff0d372f81c13070247b0ca8ea91f8f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#aff0d372f81c13070247b0ca8ea91f8f7">applySubtreeLimitation</a> (\ezcQuery $query, $rootLocationId)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af7d064f57e53ccfc9faf2b3f8001ab78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#af7d064f57e53ccfc9faf2b3f8001ab78">$handler</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway')"><img src="closed.png" alt="-"/>&nbsp;Public Attributes inherited from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a></td></tr>
<tr class="memitem:a605da50308391a6923c0a57fd222e695 inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a605da50308391a6923c0a57fd222e695">NODE_ASSIGNMENT_OP_CODE_NOP</a> = 0</td></tr>
<tr class="memitem:a2c8268fe3b75009a26d7759a94fb09b9 inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a2c8268fe3b75009a26d7759a94fb09b9">NODE_ASSIGNMENT_OP_CODE_EXECUTE</a> = 1</td></tr>
<tr class="memitem:a2dc6ecfbb851fb293a3f59a6070e03e7 inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a2dc6ecfbb851fb293a3f59a6070e03e7">NODE_ASSIGNMENT_OP_CODE_CREATE_NOP</a> = 2</td></tr>
<tr class="memitem:aa28466f6c78503748647be81bb99b1e8 inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#aa28466f6c78503748647be81bb99b1e8">NODE_ASSIGNMENT_OP_CODE_CREATE</a> = 3</td></tr>
<tr class="memitem:ad1ca10a149eee045d71fa792fbf5a3ca inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#ad1ca10a149eee045d71fa792fbf5a3ca">NODE_ASSIGNMENT_OP_CODE_MOVE_NOP</a> = 4</td></tr>
<tr class="memitem:aa23fc2192dacd5081c5b128b20d8f55f inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#aa23fc2192dacd5081c5b128b20d8f55f">NODE_ASSIGNMENT_OP_CODE_MOVE</a> = 5</td></tr>
<tr class="memitem:a3a15df71f579e7ead88cc6c7e45f94e8 inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3a15df71f579e7ead88cc6c7e45f94e8">NODE_ASSIGNMENT_OP_CODE_REMOVE_NOP</a> = 6</td></tr>
<tr class="memitem:a824635001b39ef30b28dadee86b2e6e5 inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a824635001b39ef30b28dadee86b2e6e5">NODE_ASSIGNMENT_OP_CODE_REMOVE</a> = 7</td></tr>
<tr class="memitem:a1530bf41023c8bc4181e2a547f73ada0 inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a1530bf41023c8bc4181e2a547f73ada0">NODE_ASSIGNMENT_OP_CODE_SET_NOP</a> = 8</td></tr>
<tr class="memitem:a6831fc892925fcb0b87fc260f671bf7a inherit pub_attribs_classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a6831fc892925fcb0b87fc260f671bf7a">NODE_ASSIGNMENT_OP_CODE_SET</a> = 9</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location.html">Location</a> gateway implementation using the zeta database component. </p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00026">26</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a44e8eefbfbbe6e6c73408f00f1501592"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1EzcDbHandler.html">EzcDbHandler</a>&#160;</td>
          <td class="paramname"><em>$handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct from database handler</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\Core\Persistence\Legacy\EzcDbHandler</td><td class="paramname">$handler</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00042">42</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $this-&gt;handler = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#af7d064f57e53ccfc9faf2b3f8001ab78">$handler</a>;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="aff0d372f81c13070247b0ca8ea91f8f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::applySubtreeLimitation </td>
          <td>(</td>
          <td class="paramtype">\ezcQuery&#160;</td>
          <td class="paramname"><em>$query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$rootLocationId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Limits the given $query to the subtree starting at $rootLocationId</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\ezcQuery</td><td class="paramname">$query</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$rootLocationId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00178">178</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00178">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase\applySubtreeLimitation()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query-&gt;where(</div>
<div class="line">            $query-&gt;expr-&gt;like(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span>, <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( <span class="stringliteral">&#39;%/&#39;</span> . $rootLocationId . <span class="stringliteral">&#39;/%&#39;</span> )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_cgraph">
</map>
</div>
</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_aff0d372f81c13070247b0ca8ea91f8f7_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#abf344b5d58942c6bccbaf4beccbec259" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\EzcDatabase\\loadLocation\lDataByContent" alt="" coords="333,5,587,86"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#adb7ebc8368328a1d0dcc0550376bb4c3" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\EzcDatabase\\getSubtreeContent" alt="" coords="312,109,608,173"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a572126c5189fed960a04821c0a82817c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::changeMainLocation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$versionNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$parentLocationId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Changes main location of content identified by given $contentId to location identified by given $locationId</p>
<p>Updates ezcontentobject_tree table for the given $contentId and eznode_assignment table for the given $contentId, $parentLocationId and $versionNo</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$contentId</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$versionNo</td><td>version number, needed to update eznode_assignment table </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$parentLocationId</td><td>parent location of location identified by $locationId, needed to update eznode_assignment table</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a9172658a242f4da8c7e99fd5a1ec5d6e">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01335">1335</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00083">eZ\Publish\SPI\Persistence\Content\Location\$contentId</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// Update ezcontentobject_tree table</span></div>
<div class="line">        $q = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $q-&gt;update(</div>
<div class="line">            $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&quot;ezcontentobject_tree&quot;</span> )</div>
<div class="line">        )-&gt;<span class="keyword">set</span>(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;main_node_id&quot;</span> ),</div>
<div class="line">            $q-&gt;bindValue( $locationId, null, \PDO::PARAM_INT )</div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $q-&gt;expr-&gt;eq(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_id&quot;</span> ),</div>
<div class="line">                $q-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a>, null, \PDO::PARAM_INT )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">        $q-&gt;prepare()-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Erase is_main in eznode_assignment table</span></div>
<div class="line">        $q = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $q-&gt;update(</div>
<div class="line">            $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&quot;eznode_assignment&quot;</span> )</div>
<div class="line">        )-&gt;<span class="keyword">set</span>(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;is_main&quot;</span> ),</div>
<div class="line">            $q-&gt;bindValue( 0, null, \PDO::PARAM_INT )</div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $q-&gt;expr-&gt;lAnd(</div>
<div class="line">                $q-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_id&quot;</span> ),</div>
<div class="line">                    $q-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a>, null, \PDO::PARAM_INT )</div>
<div class="line">                ),</div>
<div class="line">                $q-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_version&quot;</span> ),</div>
<div class="line">                    $q-&gt;bindValue( $versionNo, null, \PDO::PARAM_INT )</div>
<div class="line">                ),</div>
<div class="line">                $q-&gt;expr-&gt;neq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;parent_node&quot;</span> ),</div>
<div class="line">                    $q-&gt;bindValue( $parentLocationId, null, \PDO::PARAM_INT )</div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">        $q-&gt;prepare()-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set new is_main in eznode_assignment table</span></div>
<div class="line">        $q = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $q-&gt;update(</div>
<div class="line">            $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&quot;eznode_assignment&quot;</span> )</div>
<div class="line">        )-&gt;<span class="keyword">set</span>(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;is_main&quot;</span> ),</div>
<div class="line">            $q-&gt;bindValue( 1, null, \PDO::PARAM_INT )</div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $q-&gt;expr-&gt;lAnd(</div>
<div class="line">                $q-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_id&quot;</span> ),</div>
<div class="line">                    $q-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a>, null, \PDO::PARAM_INT )</div>
<div class="line">                ),</div>
<div class="line">                $q-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_version&quot;</span> ),</div>
<div class="line">                    $q-&gt;bindValue( $versionNo, null, \PDO::PARAM_INT )</div>
<div class="line">                ),</div>
<div class="line">                $q-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;parent_node&quot;</span> ),</div>
<div class="line">                    $q-&gt;bindValue( $parentLocationId, null, \PDO::PARAM_INT )</div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">        $q-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afd5dd53c0967e1d6ae80a85db4eafa23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::cleanupTrash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes every entries in the trash. Will NOT remove associated content objects nor attributes.</p>
<p>Basically truncates ezcontentobject_trash table.</p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a6ece9c8c4893e4930a1b35891473d4c6">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01227">1227</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createDeleteQuery();</div>
<div class="line">        $query-&gt;deleteFrom( <span class="stringliteral">&#39;ezcontentobject_trash&#39;</span> );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abb8a40834a1506fa8031024551103976"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::countLocationsByContentId </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns how many locations given content object identified by $contentId has</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$contentId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a6c23a544d277f5db6e0531ee4af3912c">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01301">1301</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00083">eZ\Publish\SPI\Persistence\Content\Location\$contentId</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $q = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $q</div>
<div class="line">            -&gt;select(</div>
<div class="line">                $q-&gt;alias( $q-&gt;expr-&gt;count( <span class="charliteral">&#39;*&#39;</span> ), <span class="stringliteral">&#39;count&#39;</span> )</div>
<div class="line">            )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $q-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                    $q-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a>, null, \PDO::PARAM_INT )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $stmt = $q-&gt;prepare();</div>
<div class="line">        $stmt-&gt;execute();</div>
<div class="line">        $res = $stmt-&gt;fetchAll( \PDO::FETCH_ASSOC );</div>
<div class="line">        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)$res[0][<span class="stringliteral">&#39;count&#39;</span>];</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a67a67dc42da8a300a642d07cfc7e572a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::createLocationsFromNodeAssignments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$versionNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create locations from node assignments</p>
<p>Convert existing node assignments into real locations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$contentId</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$versionNo</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a22aca9819f48aa43921e3eb0486ddd81">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00785">785</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00083">eZ\Publish\SPI\Persistence\Content\Location\$contentId</a>, <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00116">eZ\Publish\SPI\Persistence\Content\Location\$mainLocationId</a>, <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a4fd04e7e386a8ecc073c3916a0306ac2">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\create()</a>, <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3587a84fe2b1370d6d162b9b9bc316af">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\getBasicNodeData()</a>, and <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#adfd5d0f055204d2de4864152df8252db">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\updateNodeAssignment()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// select all node assignments with OP_CODE_CREATE (3) for this content</span></div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;eznode_assignment&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;lAnd(</div>
<div class="line">                    $query-&gt;expr-&gt;like(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a>, null, \PDO::PARAM_INT )</div>
<div class="line">                    ),</div>
<div class="line">                    $query-&gt;expr-&gt;like(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_version&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( $versionNo, null, \PDO::PARAM_INT )</div>
<div class="line">                    ),</div>
<div class="line">                    $query-&gt;expr-&gt;like(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;op_code&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( self::NODE_ASSIGNMENT_OP_CODE_CREATE, null, \PDO::PARAM_INT )</div>
<div class="line">                    )</div>
<div class="line">                )</div>
<div class="line">            )-&gt;orderBy( <span class="stringliteral">&#39;id&#39;</span> );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// convert all these assignments to nodes</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">while</span> ( $row = $statement-&gt;fetch( \PDO::FETCH_ASSOC ) )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( (<span class="keywordtype">bool</span>)$row[<span class="stringliteral">&#39;is_main&#39;</span>] === true )</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#aad18b7f15fb03a74084ebd9dba6062da">$mainLocationId</a> = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#aad18b7f15fb03a74084ebd9dba6062da">$mainLocationId</a> = $this-&gt;getMainNodeId( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a> );</div>
<div class="line">            }</div>
<div class="line">            $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a4fd04e7e386a8ecc073c3916a0306ac2">create</a>(</div>
<div class="line">                <span class="keyword">new</span> CreateStruct(</div>
<div class="line">                    array(</div>
<div class="line">                        <span class="stringliteral">&#39;contentId&#39;</span> =&gt; $row[<span class="stringliteral">&#39;contentobject_id&#39;</span>],</div>
<div class="line">                        <span class="stringliteral">&#39;contentVersion&#39;</span> =&gt; $row[<span class="stringliteral">&#39;contentobject_version&#39;</span>],</div>
<div class="line">                        <span class="stringliteral">&#39;mainLocationId&#39;</span> =&gt; <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#aad18b7f15fb03a74084ebd9dba6062da">$mainLocationId</a>,</div>
<div class="line">                        <span class="stringliteral">&#39;remoteId&#39;</span> =&gt; $row[<span class="stringliteral">&#39;remote_id&#39;</span>],</div>
<div class="line">                        <span class="stringliteral">&#39;sortField&#39;</span> =&gt; $row[<span class="stringliteral">&#39;sort_field&#39;</span>],</div>
<div class="line">                        <span class="stringliteral">&#39;sortOrder&#39;</span> =&gt; $row[<span class="stringliteral">&#39;sort_order&#39;</span>],</div>
<div class="line">                    )</div>
<div class="line">                ),</div>
<div class="line">                $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3587a84fe2b1370d6d162b9b9bc316af">getBasicNodeData</a>( $row[<span class="stringliteral">&#39;parent_node&#39;</span>] )</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line">            $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#adfd5d0f055204d2de4864152df8252db">updateNodeAssignment</a>(</div>
<div class="line">                $row[<span class="stringliteral">&#39;contentobject_id&#39;</span>],</div>
<div class="line">                $row[<span class="stringliteral">&#39;parent_node&#39;</span>],</div>
<div class="line">                $row[<span class="stringliteral">&#39;parent_node&#39;</span>],</div>
<div class="line">                self::NODE_ASSIGNMENT_OP_CODE_CREATE_NOP</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a67a67dc42da8a300a642d07cfc7e572a_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a67a67dc42da8a300a642d07cfc7e572a_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a67a67dc42da8a300a642d07cfc7e572a_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a67a67dc42da8a300a642d07cfc7e572a_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a4fd04e7e386a8ecc073c3916a0306ac2" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\create" alt="" coords="348,5,548,69"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3587a84fe2b1370d6d162b9b9bc316af" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\getBasicNodeData" alt="" coords="345,93,551,157"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#adfd5d0f055204d2de4864152df8252db" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\updateNodeAssignment" alt="" coords="328,181,568,245"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad5ad15be9607e4cd783c232954c47313"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::createNodeAssignment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location_1_1CreateStruct.html">CreateStruct</a>&#160;</td>
          <td class="paramname"><em>$createStruct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$parentNodeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code>self::NODE_ASSIGNMENT_OP_CODE_CREATE_NOP</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an entry in the node assignment table</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\Content\Location\CreateStruct</td><td class="paramname">$createStruct</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$parentNodeId</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$type</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a5842ee94df0926e0c79ec5224529d68e">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00660">660</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00022">eZ\Publish\SPI\Persistence\Content\Location\SORT_FIELD_PUBLISHED</a>, and <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00034">eZ\Publish\SPI\Persistence\Content\Location\SORT_ORDER_DESC</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $isMain = ( $createStruct-&gt;mainLocationId === <span class="keyword">true</span> ? 1 : 0 );</div>
<div class="line"></div>
<div class="line">        $query = $this-&gt;handler-&gt;createInsertQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;insertInto( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;eznode_assignment&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $createStruct-&gt;contentId, null, \PDO::PARAM_INT )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_version&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $createStruct-&gt;contentVersion, null, \PDO::PARAM_INT )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;from_node_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( 0, null, \PDO::PARAM_INT ) <span class="comment">// unused field</span></div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;id&#39;</span> ),</div>
<div class="line">                $this-&gt;handler-&gt;getAutoIncrementValue( <span class="stringliteral">&#39;eznode_assignment&#39;</span>, <span class="stringliteral">&#39;id&#39;</span> )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;is_main&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $isMain, null, \PDO::PARAM_INT ) <span class="comment">// Changed by the business layer, later</span></div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;op_code&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $type, null, \PDO::PARAM_INT )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;parent_node&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $parentNodeId, null, \PDO::PARAM_INT )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;parent_remote_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( <span class="stringliteral">&#39;&#39;</span> )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;remote_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $createStruct-&gt;remoteId, null, \PDO::PARAM_STR )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;sort_field&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#aa98e1163fa3258ae3e10d3fe0018b7d7">Location::SORT_FIELD_PUBLISHED</a>, null, \PDO::PARAM_INT )</div>
<div class="line">            )-&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;sort_order&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#ac7c69a6bd17f5c4c31373e6830e466de">Location::SORT_ORDER_DESC</a>, null, \PDO::PARAM_INT )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae127017bd8de44acff8f38813d57a858"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::deleteNodeAssignment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$versionNo</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes node assignment for given $contentId and $versionNo</p>
<p>If $versionNo is not passed all node assignments for given $contentId are deleted</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$contentId</td><td></td></tr>
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$versionNo</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a9135f6e5521b57198a587c44f802cce6">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00714">714</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00083">eZ\Publish\SPI\Persistence\Content\Location\$contentId</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createDeleteQuery();</div>
<div class="line">        $query-&gt;deleteFrom(</div>
<div class="line">            <span class="stringliteral">&#39;eznode_assignment&#39;</span></div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $query-&gt;expr-&gt;eq(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a>, null, \PDO::PARAM_INT )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">        <span class="keywordflow">if</span> ( isset( $versionNo ) )</div>
<div class="line">        {</div>
<div class="line">            $query-&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_version&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( $versionNo, null, \PDO::PARAM_INT )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e70eed6217374cea625376798b1f7bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::getBasicNodeData </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$nodeId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an array with basic node data</p>
<p>We might want to cache this, since this method is used by about every method in the location handler.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000063">Todo:</a></b></dt><dd>optimize </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$nodeId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3587a84fe2b1370d6d162b9b9bc316af">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00058">58</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( $nodeId )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $row = $statement-&gt;fetch( \PDO::FETCH_ASSOC ) )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> $row;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> NotFound( <span class="stringliteral">&#39;location&#39;</span>, $nodeId );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3d89cd7cf8613b25e10460ece0572a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::getBasicNodeDataByRemoteId </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$remoteId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an array with basic node data</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000064">Todo:</a></b></dt><dd>optimize </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$remoteId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3a0ac2bbaeec11b147ffea8c1b47146b">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00089">89</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00076">eZ\Publish\SPI\Persistence\Content\Location\$remoteId</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;remote_id&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a4e70c6270289987dc870a82ed2e3d381">$remoteId</a> )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $row = $statement-&gt;fetch( \PDO::FETCH_ASSOC ) )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> $row;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> NotFound( <span class="stringliteral">&#39;location&#39;</span>, <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a4e70c6270289987dc870a82ed2e3d381">$remoteId</a> );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25027ed956211c936548aad36dcd15de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::getChildren </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns data for the first level children of the location identified by given $locationId</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a22f2893823f7959e807da8e7383a5d13">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00195">195</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query-&gt;select( <span class="stringliteral">&quot;*&quot;</span> )-&gt;from(</div>
<div class="line">            $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&quot;ezcontentobject_tree&quot;</span> )</div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $query-&gt;expr-&gt;eq(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;parent_node_id&quot;</span>, <span class="stringliteral">&quot;ezcontentobject_tree&quot;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $locationId, null, \PDO::PARAM_INT )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $statement-&gt;fetchAll( \PDO::FETCH_ASSOC );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3228c855d294c791fb6dfb175102d5f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::getFallbackMainNodeData </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns id of the next in line node to be set as a new main node</p>
<p>This returns lowest node id for content identified by $contentId, and not of the node identified by given $locationId (current main node). Assumes that content has more than one location.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$contentId</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a0704bdc61ca59c01b56163e86d127420">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01011">1011</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00083">eZ\Publish\SPI\Persistence\Content\Location\$contentId</a>, and <a class="el" href="Query_8php_source.html#l00019">eZ\Publish\API\Repository\Values\Content\Query\SORT_ASC</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query-&gt;select(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;node_id&quot;</span> ),</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_version&quot;</span> ),</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;parent_node_id&quot;</span> )</div>
<div class="line">        )-&gt;from(</div>
<div class="line">            $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&quot;ezcontentobject_tree&quot;</span> )</div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $query-&gt;expr-&gt;lAnd(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_id&quot;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a>, null, \PDO::PARAM_INT )</div>
<div class="line">                ),</div>
<div class="line">                $query-&gt;expr-&gt;neq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;node_id&quot;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( $locationId, null, \PDO::PARAM_INT )</div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">        )-&gt;orderBy( <span class="stringliteral">&quot;node_id&quot;</span>, <a class="code" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1Content_1_1Query.html#a4bcd94044e034245bc817614b3057ede">Query::SORT_ASC</a> )-&gt;limit( 1 );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $statement-&gt;fetch( \PDO::FETCH_ASSOC );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adb7ebc8368328a1d0dcc0550376bb4c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::getSubtreeContent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sourceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find all content in the given subtree</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$sourceId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a5442ce1752012ca72744f0616bec5213">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00152">152</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00178">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase\applySubtreeLimitation()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query-&gt;select( <span class="charliteral">&#39;*&#39;</span> )-&gt;from(</div>
<div class="line">            $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> )</div>
<div class="line">        );</div>
<div class="line">        $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#aff0d372f81c13070247b0ca8ea91f8f7">applySubtreeLimitation</a>( $query, $sourceId );</div>
<div class="line">        $query-&gt;orderBy(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;depth&#39;</span>, <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> )</div>
<div class="line">        )-&gt;orderBy(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span>, <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> )</div>
<div class="line">        );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $statement-&gt;fetchAll( \PDO::FETCH_ASSOC );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_adb7ebc8368328a1d0dcc0550376bb4c3_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_adb7ebc8368328a1d0dcc0550376bb4c3_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_adb7ebc8368328a1d0dcc0550376bb4c3_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_adb7ebc8368328a1d0dcc0550376bb4c3_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#aff0d372f81c13070247b0ca8ea91f8f7" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\EzcDatabase\\applySubtree\lLimitation" alt="" coords="349,29,608,110"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a49eccd3eba0ae6d4d40cfa46a6e1c0fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::hideSubtree </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a location to be hidden, and it self + all children to invisible.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pathString</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a9bb5fc0ddb7f620e4877546d82044c57">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00336">336</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00106">eZ\Publish\SPI\Persistence\Content\Location\$pathString</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;is_invisible&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( 1 )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;modified_subnode&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( time() )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;like(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> . <span class="charliteral">&#39;%&#39;</span> )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line"></div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;is_hidden&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( 1 )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a403ef4edef2b33dff513b3a51271dd4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::listTrashed </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$sort</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>List trashed items</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$offset</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limit</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$sort</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#ab9a6907ea56dabb4f5ab0712580c6b33">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01168">1168</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="Query_8php_source.html#l00019">eZ\Publish\API\Repository\Values\Content\Query\SORT_ASC</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_trash&#39;</span> ) );</div>
<div class="line"></div>
<div class="line">        $sort = $sort ?: array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $sort as $condition )</div>
<div class="line">        {</div>
<div class="line">            $sortDirection = $condition-&gt;direction === <a class="code" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1Content_1_1Query.html#a4bcd94044e034245bc817614b3057ede">Query::SORT_ASC</a> ? \ezcQuerySelect::ASC : \ezcQuerySelect::DESC;</div>
<div class="line">            <span class="keywordflow">switch</span> ( <span class="keyword">true</span> )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">case</span> $condition instanceof SortClause\LocationDepth:</div>
<div class="line">                    $query-&gt;orderBy( <span class="stringliteral">&#39;depth&#39;</span>, $sortDirection );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">case</span> $condition instanceof SortClause\LocationPathString:</div>
<div class="line">                    $query-&gt;orderBy( <span class="stringliteral">&#39;path_string&#39;</span>, $sortDirection );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">case</span> $condition instanceof SortClause\LocationPriority:</div>
<div class="line">                    $query-&gt;orderBy( <span class="stringliteral">&#39;priority&#39;</span>, $sortDirection );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="comment">// Only handle location related sort clauses. The others</span></div>
<div class="line">                    <span class="comment">// require data aggregation which is not sensible here.</span></div>
<div class="line">                    <span class="comment">// Since also criteria are yet ignored, because they are</span></div>
<div class="line">                    <span class="comment">// simply not used yet in eZ Publish, we skip that for now.</span></div>
<div class="line">                    <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException( <span class="stringliteral">&#39;Unhandled sort clause: &#39;</span> . get_class( $condition ) );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $limit !== null )</div>
<div class="line">        {</div>
<div class="line">            $query-&gt;limit( $limit, $offset );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        $rows = array();</div>
<div class="line">        <span class="keywordflow">while</span> ( $row = $statement-&gt;fetch( \PDO::FETCH_ASSOC ) )</div>
<div class="line">        {</div>
<div class="line">            $rows[] = $row;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $rows;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf344b5d58942c6bccbaf4beccbec259"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::loadLocationDataByContent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$rootLocationId</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads data for all Locations for $contentId, optionally only in the subtree starting at $rootLocationId</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$contentId</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$rootLocationId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#aea0c0022a2468cb9ab9ffaaf94f17a13">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00121">121</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00083">eZ\Publish\SPI\Persistence\Content\Location\$contentId</a>, and <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00178">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase\applySubtreeLimitation()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a> )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $rootLocationId !== null )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#aff0d372f81c13070247b0ca8ea91f8f7">applySubtreeLimitation</a>( $query, $rootLocationId );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $statement-&gt;fetchAll( \PDO::FETCH_ASSOC );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_abf344b5d58942c6bccbaf4beccbec259_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_abf344b5d58942c6bccbaf4beccbec259_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_abf344b5d58942c6bccbaf4beccbec259_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_abf344b5d58942c6bccbaf4beccbec259_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#aff0d372f81c13070247b0ca8ea91f8f7" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\EzcDatabase\\applySubtree\lLimitation" alt="" coords="309,29,568,110"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad0a13da10246e6623b3a5406ecc87e96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::loadTrashByLocation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads trash data specified by location ID</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a18a7849cf426eee5565f02ea48797962">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01136">1136</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_trash&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( $locationId )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $row = $statement-&gt;fetch( \PDO::FETCH_ASSOC ) )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> $row;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> NotFound( <span class="stringliteral">&#39;trash&#39;</span>, $locationId );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac6ac8e042de3b8067e1dd61d4ba76fa7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::removeElementFromTrash </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes trashed element identified by $id from trash. Will NOT remove associated content object nor attributes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>The trashed location Id</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#ac317d9895dc2e3eec0a44bdf9ec62c4e">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01242">1242</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00042">eZ\Publish\SPI\Persistence\Content\Location\$id</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createDeleteQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;deleteFrom( <span class="stringliteral">&#39;ezcontentobject_trash&#39;</span> )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#ab3a91d37062a6c5b1e812572e18c69ab">$id</a>, null, \PDO::PARAM_INT )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47fd1e6d822f0dce624e14a95534d7ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::removeLocation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes ezcontentobject_tree row for given $locationId (node_id)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a5067f735eb503f242caa1bd3626a160d">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00985">985</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createDeleteQuery();</div>
<div class="line">        $query-&gt;deleteFrom(</div>
<div class="line">            <span class="stringliteral">&quot;ezcontentobject_tree&quot;</span></div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $query-&gt;expr-&gt;eq(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;node_id&quot;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $locationId, null, \PDO::PARAM_INT )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9572a5edebb7a98e5a99801acffa553a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::setSectionForSubtree </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sectionId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set section on all content objects in the subtree</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$pathString</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$sectionId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a9af41e8726ad036eb361a5386732ef25">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01264">1264</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00106">eZ\Publish\SPI\Persistence\Content\Location\$pathString</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line"></div>
<div class="line">        $subSelect = $query-&gt;subSelect();</div>
<div class="line">        $subSelect</div>
<div class="line">            -&gt;select( $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ) )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $subSelect-&gt;expr-&gt;like(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ),</div>
<div class="line">                    $subSelect-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> . <span class="charliteral">&#39;%&#39;</span> )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;section_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $sectionId )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;in(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;id&#39;</span> ),</div>
<div class="line">                    $subSelect</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a03e4bada21b7dc6b05092e03141e043a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::swap </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Swaps the content object being pointed to by a location object.</p>
<p>Make the location identified by $locationId1 refer to the <a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content.html">Content</a> referred to by $locationId2 and vice versa.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId1</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId2</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a93802c560998f80593a1f8fb394d7e23">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00499">499</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_version&#39;</span> )</div>
<div class="line">            )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;in(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    array( $locationId1, $locationId2 )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $statement-&gt;fetchAll() as $row )</div>
<div class="line">        {</div>
<div class="line">            $contentObjects[$row[<span class="stringliteral">&#39;node_id&#39;</span>]] = $row;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $contentObjects[$locationId2][<span class="stringliteral">&#39;contentobject_id&#39;</span>] )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_version&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $contentObjects[$locationId2][<span class="stringliteral">&#39;contentobject_version&#39;</span>] )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( $locationId1 )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line"></div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $contentObjects[$locationId1][<span class="stringliteral">&#39;contentobject_id&#39;</span>] )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_version&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $contentObjects[$locationId1][<span class="stringliteral">&#39;contentobject_version&#39;</span>] )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( $locationId2 )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1ffe7d730eaacc30cc1c7f06e39e0eb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::unHideSubtree </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a location to be unhidden, and self + children to visible unless a parent is hidding the tree. If not make sure only children down to first hidden node is marked visible.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pathString</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a1a589902f7484fc88be7bc980182fab3">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00379">379</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00033">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase\$handler</a>, and <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00106">eZ\Publish\SPI\Persistence\Content\Location\$pathString</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// Unhide the requested node</span></div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;is_hidden&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( 0 )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ),</div>
<div class="line">                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check if any parent nodes are explicitely hidden</span></div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ) )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;lAnd(</div>
<div class="line">                    $query-&gt;expr-&gt;eq(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;is_hidden&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( 1 )</div>
<div class="line">                    ),</div>
<div class="line">                    $query-&gt;expr-&gt;in(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                        array_filter( explode( <span class="charliteral">&#39;/&#39;</span>, <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> ) )</div>
<div class="line">                    )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line">        <span class="keywordflow">if</span> ( count( $statement-&gt;fetchAll( \PDO::FETCH_COLUMN ) ) )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// There are parent nodes set hidden, so that we can skip marking</span></div>
<div class="line">            <span class="comment">// something visible again.</span></div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Find nodes of explicitly hidden subtrees in the subtree which</span></div>
<div class="line">        <span class="comment">// should be unhidden</span></div>
<div class="line">        $query = $this-&gt;handler-&gt;createSelectQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;select( $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ) )</div>
<div class="line">            -&gt;from( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;lAnd(</div>
<div class="line">                    $query-&gt;expr-&gt;eq(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;is_hidden&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( 1 )</div>
<div class="line">                    ),</div>
<div class="line">                    $query-&gt;expr-&gt;like(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> . <span class="charliteral">&#39;%&#39;</span> )</div>
<div class="line">                    )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $statement = $query-&gt;prepare();</div>
<div class="line">        $statement-&gt;execute();</div>
<div class="line">        $hiddenSubtrees = $statement-&gt;fetchAll( \PDO::FETCH_COLUMN );</div>
<div class="line"></div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;is_invisible&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( 0 )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;modified_subnode&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( time() )</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Build where expression selecting the nodes, which should be made</span></div>
<div class="line">        <span class="comment">// visible again</span></div>
<div class="line">        $where = $query-&gt;expr-&gt;like(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ),</div>
<div class="line">            $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> . <span class="charliteral">&#39;%&#39;</span> )</div>
<div class="line">        );</div>
<div class="line">        <span class="keywordflow">if</span> ( count( $hiddenSubtrees ) )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#af7d064f57e53ccfc9faf2b3f8001ab78">$handler</a> = $this-&gt;handler;</div>
<div class="line">            $where = $query-&gt;expr-&gt;lAnd(</div>
<div class="line">                $where,</div>
<div class="line">                $query-&gt;expr-&gt;lAnd(</div>
<div class="line">                    array_map(</div>
<div class="line">                        <span class="keyword">function</span> ( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> ) use ( $query, $handler )</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordflow">return</span> $query-&gt;expr-&gt;not(</div>
<div class="line">                                $query-&gt;expr-&gt;like(</div>
<div class="line">                                    <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html#af7d064f57e53ccfc9faf2b3f8001ab78">$handler</a>-&gt;quoteColumn( <span class="stringliteral">&#39;path_string&#39;</span> ),</div>
<div class="line">                                    $query-&gt;bindValue( <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> . <span class="charliteral">&#39;%&#39;</span> )</div>
<div class="line">                                )</div>
<div class="line">                            );</div>
<div class="line">                        },</div>
<div class="line">                        $hiddenSubtrees</div>
<div class="line">                    )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">        $query-&gt;where( $where );</div>
<div class="line">        $statement = $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a551a5fce04fc5268441f427e46aafeaa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::untrashLocation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$newParentId</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a trashed location to normal state.</p>
<p>Recreates the originally trashed location in the new position. If no new position has been specified, it will be tried to re-create the location at the old position. If this is not possible ( because the old location does not exist any more) and exception is thrown.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$locationId</td><td></td></tr>
    <tr><td class="paramtype">mixed&#160;|&#160;null</td><td class="paramname">$newParentId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3f1a00e0d030f242c84cf8055ff06e85">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l01080">1080</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a4fd04e7e386a8ecc073c3916a0306ac2">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\create()</a>, <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3587a84fe2b1370d6d162b9b9bc316af">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\getBasicNodeData()</a>, <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a18a7849cf426eee5565f02ea48797962">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\loadTrashByLocation()</a>, <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#ac317d9895dc2e3eec0a44bdf9ec62c4e">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\removeElementFromTrash()</a>, and <a class="el" href="SPI_2Persistence_2Content_2ContentInfo_8php_source.html#l00022">eZ\Publish\SPI\Persistence\Content\ContentInfo\STATUS_PUBLISHED</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $row = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a18a7849cf426eee5565f02ea48797962">loadTrashByLocation</a>( $locationId );</div>
<div class="line"></div>
<div class="line">        $newLocation = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a4fd04e7e386a8ecc073c3916a0306ac2">create</a>(</div>
<div class="line">            <span class="keyword">new</span> CreateStruct(</div>
<div class="line">                array(</div>
<div class="line">                    <span class="stringliteral">&#39;priority&#39;</span> =&gt; $row[<span class="stringliteral">&#39;priority&#39;</span>],</div>
<div class="line">                    <span class="stringliteral">&#39;hidden&#39;</span> =&gt; $row[<span class="stringliteral">&#39;is_hidden&#39;</span>],</div>
<div class="line">                    <span class="stringliteral">&#39;invisible&#39;</span> =&gt; $row[<span class="stringliteral">&#39;is_invisible&#39;</span>],</div>
<div class="line">                    <span class="stringliteral">&#39;remoteId&#39;</span> =&gt; $row[<span class="stringliteral">&#39;remote_id&#39;</span>],</div>
<div class="line">                    <span class="stringliteral">&#39;contentId&#39;</span> =&gt; $row[<span class="stringliteral">&#39;contentobject_id&#39;</span>],</div>
<div class="line">                    <span class="stringliteral">&#39;contentVersion&#39;</span> =&gt; $row[<span class="stringliteral">&#39;contentobject_version&#39;</span>],</div>
<div class="line">                    <span class="stringliteral">&#39;mainLocationId&#39;</span> =&gt; <span class="keyword">true</span>,<span class="comment">// Restored location is always main location</span></div>
<div class="line">                    <span class="stringliteral">&#39;sortField&#39;</span> =&gt; $row[<span class="stringliteral">&#39;sort_field&#39;</span>],</div>
<div class="line">                    <span class="stringliteral">&#39;sortOrder&#39;</span> =&gt; $row[<span class="stringliteral">&#39;sort_order&#39;</span>],</div>
<div class="line">                )</div>
<div class="line">            ),</div>
<div class="line">            $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3587a84fe2b1370d6d162b9b9bc316af">getBasicNodeData</a>( $newParentId ?: $row[<span class="stringliteral">&#39;parent_node_id&#39;</span>] )</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#ac317d9895dc2e3eec0a44bdf9ec62c4e">removeElementFromTrash</a>( $locationId );</div>
<div class="line">        $this-&gt;setContentStatus( $row[<span class="stringliteral">&#39;contentobject_id&#39;</span>], <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1ContentInfo.html#ad8e487eee9184fcaa07cf93c1e229de4">ContentInfo::STATUS_PUBLISHED</a> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $newLocation;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a551a5fce04fc5268441f427e46aafeaa_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a551a5fce04fc5268441f427e46aafeaa_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a551a5fce04fc5268441f427e46aafeaa_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase_a551a5fce04fc5268441f427e46aafeaa_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a4fd04e7e386a8ecc073c3916a0306ac2" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\create" alt="" coords="357,5,557,69"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a3587a84fe2b1370d6d162b9b9bc316af" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\getBasicNodeData" alt="" coords="355,93,560,157"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a18a7849cf426eee5565f02ea48797962" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\loadTrashByLocation" alt="" coords="351,181,564,245"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#ac317d9895dc2e3eec0a44bdf9ec62c4e" title="eZ\\Publish\\Core\\Persistence\l\\Legacy\\Content\\Location\l\\Gateway\\removeElementFromTrash" alt="" coords="332,269,583,333"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad282140b7250c0874a5786ec24dd1eca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location_1_1UpdateStruct.html">UpdateStruct</a>&#160;</td>
          <td class="paramname"><em>$location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locationId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates an existing location.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\Content\Location\UpdateStruct</td><td class="paramname">$location</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$locationId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a09752cdf1407800d762ede29b8bed6de">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00918">918</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line"></div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;priority&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $location-&gt;priority )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;remote_id&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $location-&gt;remoteId )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;sort_order&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $location-&gt;sortOrder )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;sort_field&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $location-&gt;sortField )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;eq(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    $locationId</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af5fe6a91b88b33b6c381a6e8a38c1c86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::updateLocationsContentVersionNo </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$versionNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates all Locations of content identified with $contentId with $versionNo</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$contentId</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$versionNo</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a35436c7482c787814ec9fe8fecdfa4a7">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00854">854</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00083">eZ\Publish\SPI\Persistence\Content\Location\$contentId</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query-&gt;update(</div>
<div class="line">            $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&quot;ezcontentobject_tree&quot;</span> )</div>
<div class="line">        )-&gt;<span class="keyword">set</span>(</div>
<div class="line">            $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_version&quot;</span> ),</div>
<div class="line">            $query-&gt;bindValue( $versionNo, null, \PDO::PARAM_INT )</div>
<div class="line">        )-&gt;where(</div>
<div class="line">            $query-&gt;expr-&gt;eq(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&quot;contentobject_id&quot;</span> ),</div>
<div class="line">                <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#a8412da687922acf3ef5c1f016c3c07ca">$contentId</a></div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4ab25960f00c0bbcfe6ef19310434329"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::updateNodeAssignment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contentObjectId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$oldParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$newParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$opcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update node assignment table</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$contentObjectId</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$oldParent</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$newParent</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$opcode</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#adfd5d0f055204d2de4864152df8252db">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00747">747</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;eznode_assignment&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;parent_node&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $newParent, null, \PDO::PARAM_INT )</div>
<div class="line">            )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;op_code&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue( $opcode, null, \PDO::PARAM_INT )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;lAnd(</div>
<div class="line">                    $query-&gt;expr-&gt;eq(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;contentobject_id&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( $contentObjectId, null, \PDO::PARAM_INT )</div>
<div class="line">                    ),</div>
<div class="line">                    $query-&gt;expr-&gt;eq(</div>
<div class="line">                        $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;parent_node&#39;</span> ),</div>
<div class="line">                        $query-&gt;bindValue( $oldParent, null, \PDO::PARAM_INT )</div>
<div class="line">                    )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a377be6fd307a1a0534c6d7195edc3f5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::updateSubtreeModificationTime </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$timestamp</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updated subtree modification time for all nodes on path</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pathString</td><td></td></tr>
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$timestamp</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html#a37b32b0aac2782d32c502dcbc64a40fe">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway</a>.</p>

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00310">310</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

<p>References <a class="el" href="SPI_2Persistence_2Content_2Location_8php_source.html#l00106">eZ\Publish\SPI\Persistence\Content\Location\$pathString</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $nodes = array_filter( explode( <span class="charliteral">&#39;/&#39;</span>, <a class="code" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Location.html#acacc542395398917e79c55b5a41228b3">$pathString</a> ) );</div>
<div class="line">        $query = $this-&gt;handler-&gt;createUpdateQuery();</div>
<div class="line">        $query</div>
<div class="line">            -&gt;update( $this-&gt;handler-&gt;quoteTable( <span class="stringliteral">&#39;ezcontentobject_tree&#39;</span> ) )</div>
<div class="line">            -&gt;<span class="keyword">set</span>(</div>
<div class="line">                $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;modified_subnode&#39;</span> ),</div>
<div class="line">                $query-&gt;bindValue(</div>
<div class="line">                    $timestamp ?: time()</div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">            -&gt;where(</div>
<div class="line">                $query-&gt;expr-&gt;in(</div>
<div class="line">                    $this-&gt;handler-&gt;quoteColumn( <span class="stringliteral">&#39;node_id&#39;</span> ),</div>
<div class="line">                    $nodes</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">        $query-&gt;prepare()-&gt;execute();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<h2>Member Data Documentation</h2>
<a class="anchor" id="af7d064f57e53ccfc9faf2b3f8001ab78"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Persistence\Legacy\Content\Location\Gateway\EzcDatabase::$handler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html#l00033">33</a> of file <a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/var/lib/jenkins/jobs/PAPI-doxygen-master/workspace/eZ/Publish/Core/Persistence/Legacy/Content/Location/Gateway/<a class="el" href="Content_2Location_2Gateway_2EzcDatabase_8php_source.html">EzcDatabase.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceeZ.html">eZ</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish.html">Publish</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core.html">Core</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence.html">Persistence</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy.html">Legacy</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content.html">Content</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location.html">Location</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway.html">Gateway</a></li><li class="navelem"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Persistence_1_1Legacy_1_1Content_1_1Location_1_1Gateway_1_1EzcDatabase.html">EzcDatabase</a></li>
    <li class="footer">Generated on Tue Dec 11 2012 00:02:20 for ezp-next by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
