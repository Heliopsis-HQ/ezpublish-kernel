<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ezp-next: eZ\Publish\Core\Repository\RoleService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ezp-next
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">eZ\Publish\Core\Repository\RoleService Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for eZ\Publish\Core\Repository\RoleService:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService__inherit__graph.png" border="0" usemap="#eZ_0CPublish_0CCore_0CRepository_0CRoleService_inherit__map" alt="Inheritance graph"/></div>
<map name="eZ_0CPublish_0CCore_0CRepository_0CRoleService_inherit__map" id="eZ_0CPublish_0CCore_0CRepository_0CRoleService_inherit__map">
<area shape="rect" id="node2" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html" title="eZ\\Publish\\API\\Repository\l\\RoleService" alt="" coords="11,6,192,53"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for eZ\Publish\Core\Repository\RoleService:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService__coll__graph.png" border="0" usemap="#eZ_0CPublish_0CCore_0CRepository_0CRoleService_coll__map" alt="Collaboration graph"/></div>
<map name="eZ_0CPublish_0CCore_0CRepository_0CRoleService_coll__map" id="eZ_0CPublish_0CCore_0CRepository_0CRoleService_coll__map">
<area shape="rect" id="node2" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html" title="eZ\\Publish\\API\\Repository\l\\RoleService" alt="" coords="11,6,192,53"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a93577c92b2c3eb5929fbf22daafe6a70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a93577c92b2c3eb5929fbf22daafe6a70">__construct</a> (RepositoryInterface $repository, <a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1IO_1_1Handler.html">Handler</a> $userHandler, array $settings=array())</td></tr>
<tr class="memitem:a12a7488c3b37644b1648230d35d93f30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12a7488c3b37644b1648230d35d93f30">createRole</a> (APIRoleCreateStruct $roleCreateStruct)</td></tr>
<tr class="memitem:a8f9b8e8f229a5e591d019b0450375871"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8f9b8e8f229a5e591d019b0450375871">updateRole</a> (APIRole $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1RoleUpdateStruct.html">RoleUpdateStruct</a> $roleUpdateStruct)</td></tr>
<tr class="memitem:a84e195d93e0f85f9d97370ce07bcd928"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a84e195d93e0f85f9d97370ce07bcd928">addPolicy</a> (APIRole $role, APIPolicyCreateStruct $policyCreateStruct)</td></tr>
<tr class="memitem:adaa54576e2fb63283494578e73d3c881"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#adaa54576e2fb63283494578e73d3c881">removePolicy</a> (APIRole $role, APIPolicy $policy)</td></tr>
<tr class="memitem:a12aedfc7e5a1f413d6267c79ff09d781"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12aedfc7e5a1f413d6267c79ff09d781">updatePolicy</a> (APIPolicy $policy, APIPolicyUpdateStruct $policyUpdateStruct)</td></tr>
<tr class="memitem:a6be689764e7eef0021981bc981bd80d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a> ($id)</td></tr>
<tr class="memitem:a0675d71cc1059b889199ab6ee9ea0453"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453">loadRoleByIdentifier</a> ($identifier)</td></tr>
<tr class="memitem:a3662353f639f23d6f1b9402ee391793d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a3662353f639f23d6f1b9402ee391793d">loadRoles</a> ()</td></tr>
<tr class="memitem:a5bb6b9d3296708235137a26ecf981f25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a5bb6b9d3296708235137a26ecf981f25">deleteRole</a> (APIRole $role)</td></tr>
<tr class="memitem:af0b133c7de24314d903b85f77cba1e37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#af0b133c7de24314d903b85f77cba1e37">loadPoliciesByUserId</a> ($userId)</td></tr>
<tr class="memitem:a4b933459b4c3711a441a6b2f4f649b26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a4b933459b4c3711a441a6b2f4f649b26">assignRoleToUserGroup</a> (APIRole $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a> $userGroup, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Limitation_1_1RoleLimitation.html">RoleLimitation</a> $roleLimitation=null)</td></tr>
<tr class="memitem:ae68957f22acf9d72d0bfddcfd697212a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ae68957f22acf9d72d0bfddcfd697212a">unassignRoleFromUserGroup</a> (APIRole $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a> $userGroup)</td></tr>
<tr class="memitem:a6ee56d8e03d8ffd78899877325d9acb5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6ee56d8e03d8ffd78899877325d9acb5">assignRoleToUser</a> (APIRole $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a> $user, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Limitation_1_1RoleLimitation.html">RoleLimitation</a> $roleLimitation=null)</td></tr>
<tr class="memitem:a02a1eda0b26806c1366a4aa98254e832"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a02a1eda0b26806c1366a4aa98254e832">unassignRoleFromUser</a> (APIRole $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a> $user)</td></tr>
<tr class="memitem:a2933f3af27e9067c5ea3ad2f3b039c60"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a2933f3af27e9067c5ea3ad2f3b039c60">getRoleAssignments</a> (APIRole $role)</td></tr>
<tr class="memitem:ac16ebc7416e6ef7b869ce7ee026383fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac16ebc7416e6ef7b869ce7ee026383fc">getRoleAssignmentsForUser</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a> $user, $inherited=false)</td></tr>
<tr class="memitem:aa22758ff022c68ad38a797b2b52faba7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#aa22758ff022c68ad38a797b2b52faba7">getRoleAssignmentsForUserGroup</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a> $userGroup)</td></tr>
<tr class="memitem:abcc22f2b418085a2768fd0424eb7039c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#abcc22f2b418085a2768fd0424eb7039c">newRoleCreateStruct</a> ($name)</td></tr>
<tr class="memitem:ae90537c9106e192a68d6ffb29a512ff6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ae90537c9106e192a68d6ffb29a512ff6">newPolicyCreateStruct</a> ($module, $function)</td></tr>
<tr class="memitem:abc44bafc34bc2a927879de662c17be12"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#abc44bafc34bc2a927879de662c17be12">newPolicyUpdateStruct</a> ()</td></tr>
<tr class="memitem:af0bf2c3181f15336df31056bc95fc6b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#af0bf2c3181f15336df31056bc95fc6b9">newRoleUpdateStruct</a> ()</td></tr>
<tr class="memitem:a8e0434f0a2e608ce2f287f5978c483c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7">buildDomainPolicyObject</a> (SPIPolicy $policy, SPIRole $role=null)</td></tr>
<tr class="memitem:a722e54da8ce64e42a3229360133578f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3">buildDomainUserRoleAssignmentObject</a> (SPIRoleAssignment $spiRoleAssignment, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a> $user=null, APIRole $role=null)</td></tr>
<tr class="memitem:a90878e2641517da356c19510fbe90e27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27">buildDomainUserGroupRoleAssignmentObject</a> (SPIRoleAssignment $spiRoleAssignment, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a> $userGroup=null, APIRole $role=null)</td></tr>
<tr class="memitem:a36a6fd8040d29e053f72285fee3a549c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c">getLimitationType</a> ($identifier)</td></tr>
<tr class="memitem:a8d68b0f43a3975614c00612522071b66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8d68b0f43a3975614c00612522071b66">getLimitationTypesByModuleFunction</a> ($module, $function)</td></tr>
<tr class="inherit_header pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService')"><img src="closed.png" alt="-"/>&nbsp;Public Member Functions inherited from <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html">eZ\Publish\API\Repository\RoleService</a></td></tr>
<tr class="memitem:a98003c5f56bc715695e6a725a2041c62 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a98003c5f56bc715695e6a725a2041c62">createRole</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1RoleCreateStruct.html">RoleCreateStruct</a> $roleCreateStruct)</td></tr>
<tr class="memitem:a646b1fbcd2f7bccb805348b10a827cc0 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a646b1fbcd2f7bccb805348b10a827cc0">updateRole</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1RoleUpdateStruct.html">RoleUpdateStruct</a> $roleUpdateStruct)</td></tr>
<tr class="memitem:a09373b454753e868c0f644e6b7a98545 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a09373b454753e868c0f644e6b7a98545">addPolicy</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1PolicyCreateStruct.html">PolicyCreateStruct</a> $policyCreateStruct)</td></tr>
<tr class="memitem:a279f1f83cb86885fb12363a95be10263 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a279f1f83cb86885fb12363a95be10263">removePolicy</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Policy.html">Policy</a> $policy)</td></tr>
<tr class="memitem:a8e0897ecbc743b05c0a2856d1ab13e28 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a8e0897ecbc743b05c0a2856d1ab13e28">updatePolicy</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Policy.html">Policy</a> $policy, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1PolicyUpdateStruct.html">PolicyUpdateStruct</a> $policyUpdateStruct)</td></tr>
<tr class="memitem:af8c59299a1c8abc28e894f096fb23fa7 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#af8c59299a1c8abc28e894f096fb23fa7">deleteRole</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role)</td></tr>
<tr class="memitem:a58d350245c488681f0dcd77715255f84 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a58d350245c488681f0dcd77715255f84">assignRoleToUserGroup</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a> $userGroup, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Limitation_1_1RoleLimitation.html">RoleLimitation</a> $roleLimitation=null)</td></tr>
<tr class="memitem:afcc417ef1c8a07513190b34551874b9a inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#afcc417ef1c8a07513190b34551874b9a">unassignRoleFromUserGroup</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a> $userGroup)</td></tr>
<tr class="memitem:ad877112527b434652369452d49217938 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#ad877112527b434652369452d49217938">assignRoleToUser</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a> $user, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Limitation_1_1RoleLimitation.html">RoleLimitation</a> $roleLimitation=null)</td></tr>
<tr class="memitem:aaedd980f9fa91c24bc635328e078e2ab inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#aaedd980f9fa91c24bc635328e078e2ab">unassignRoleFromUser</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role, <a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a> $user)</td></tr>
<tr class="memitem:a61bc2fde374ed5b3ccec97c4c050985e inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a61bc2fde374ed5b3ccec97c4c050985e">getRoleAssignments</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Role.html">Role</a> $role)</td></tr>
<tr class="memitem:ab9aa52f5a2dd4bef93d09f1e0946f4b8 inherit pub_methods_interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#ab9aa52f5a2dd4bef93d09f1e0946f4b8">getRoleAssignmentsForUser</a> (<a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a> $user)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a75e6966988ddeff98eaa3e80be8598cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd">buildDomainRoleObject</a> (SPIRole $role)</td></tr>
<tr class="memitem:ac7aad491d74e80f9fe92ed071e12c400"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac7aad491d74e80f9fe92ed071e12c400">buildPersistenceRoleObject</a> (APIRoleCreateStruct $roleCreateStruct)</td></tr>
<tr class="memitem:ac90388c7a3faf9fa3769305d22adde6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e">buildPersistencePolicyObject</a> ($module, $function, array $limitations)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ad258dd31f3e23611ed7763923aa7c9e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ad258dd31f3e23611ed7763923aa7c9e9">$repository</a></td></tr>
<tr class="memitem:a0b6b76cb79fea1e516d18c969ec75ca8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0b6b76cb79fea1e516d18c969ec75ca8">$userHandler</a></td></tr>
<tr class="memitem:ad62e8f9f9bbd9d222d8cae14816b6eb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ad62e8f9f9bbd9d222d8cae14816b6eb2">$settings</a></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00046">46</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a93577c92b2c3eb5929fbf22daafe6a70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::__construct </td>
          <td>(</td>
          <td class="paramtype">RepositoryInterface&#160;</td>
          <td class="paramname"><em>$repository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1IO_1_1Handler.html">Handler</a>&#160;</td>
          <td class="paramname"><em>$userHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$settings</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setups service with reference to repository object that created it &amp; corresponding handler</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Repository</td><td class="paramname">$repository</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\User\Handler</td><td class="paramname">$userHandler</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$settings</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00070">70</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00051">eZ\Publish\Core\Repository\RoleService\$repository</a>, <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00061">eZ\Publish\Core\Repository\RoleService\$settings</a>, and <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00056">eZ\Publish\Core\Repository\RoleService\$userHandler</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $this-&gt;repository = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ad258dd31f3e23611ed7763923aa7c9e9">$repository</a>;</div>
<div class="line">        $this-&gt;userHandler = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0b6b76cb79fea1e516d18c969ec75ca8">$userHandler</a>;</div>
<div class="line">        <span class="comment">// Union makes sure default settings are ignored if provided in argument</span></div>
<div class="line">        $this-&gt;settings = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ad62e8f9f9bbd9d222d8cae14816b6eb2">$settings</a> + array(</div>
<div class="line">            <span class="stringliteral">&#39;limitationTypes&#39;</span> =&gt; array(),</div>
<div class="line">            <span class="stringliteral">&#39;limitationMap&#39;</span> =&gt; array(),</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a84e195d93e0f85f9d97370ce07bcd928"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::addPolicy </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">APIPolicyCreateStruct&#160;</td>
          <td class="paramname"><em>$policyCreateStruct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a new policy to the role</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to add a policy</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\PolicyCreateStruct</td><td class="paramname">$policyCreateStruct</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00197">197</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l01008">eZ\Publish\Core\Repository\RoleService\buildPersistencePolicyObject()</a>, and <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00337">eZ\Publish\Core\Repository\RoleService\loadRole()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_string( $policyCreateStruct-&gt;module ) || empty( $policyCreateStruct-&gt;module ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;module&quot;</span>, $policyCreateStruct-&gt;module, <span class="stringliteral">&quot;PolicyCreateStruct&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_string( $policyCreateStruct-&gt;function ) || empty( $policyCreateStruct-&gt;function ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;function&quot;</span>, $policyCreateStruct-&gt;function, <span class="stringliteral">&quot;PolicyCreateStruct&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $policyCreateStruct-&gt;module === <span class="charliteral">&#39;*&#39;</span> &amp;&amp; $policyCreateStruct-&gt;function !== <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;module&quot;</span>, $policyCreateStruct-&gt;module, <span class="stringliteral">&quot;PolicyCreateStruct&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $loadedRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $role-&gt;id );</div>
<div class="line"></div>
<div class="line">        $spiPolicy = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e">buildPersistencePolicyObject</a>(</div>
<div class="line">            $policyCreateStruct-&gt;module,</div>
<div class="line">            $policyCreateStruct-&gt;function,</div>
<div class="line">            $policyCreateStruct-&gt;getLimitations()</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;addPolicy( $loadedRole-&gt;id, $spiPolicy );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $loadedRole-&gt;id );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a84e195d93e0f85f9d97370ce07bcd928_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a84e195d93e0f85f9d97370ce07bcd928_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a84e195d93e0f85f9d97370ce07bcd928_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a84e195d93e0f85f9d97370ce07bcd928_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildPersistencePolicy\lObject" alt="" coords="248,5,491,69"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="273,93,465,139"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="539,93,789,139"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="839,93,1097,139"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1148,93,1361,139"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6ee56d8e03d8ffd78899877325d9acb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::assignRoleToUser </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Limitation_1_1RoleLimitation.html">RoleLimitation</a>&#160;</td>
          <td class="paramname"><em>$roleLimitation</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assigns a role to the given user</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to assign a role</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\User</td><td class="paramname">$user</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Limitation\RoleLimitation</td><td class="paramname">$roleLimitation</td><td>an optional role limitation (which is either a subtree limitation or section limitation) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00539">539</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00337">eZ\Publish\Core\Repository\RoleService\loadRole()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $user-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $user-&gt;id, <span class="stringliteral">&quot;User&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;canUser( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span>, $user, $role ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $loadedRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $role-&gt;id );</div>
<div class="line">        $loadedUser = $this-&gt;repository-&gt;getUserService()-&gt;loadUser( $user-&gt;id );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;assignRole(</div>
<div class="line">                $loadedUser-&gt;id,</div>
<div class="line">                $loadedRole-&gt;id,</div>
<div class="line">                $roleLimitation ? array( $roleLimitation-&gt;getIdentifier() =&gt; $roleLimitation-&gt;limitationValues ) : null</div>
<div class="line">            );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6ee56d8e03d8ffd78899877325d9acb5_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6ee56d8e03d8ffd78899877325d9acb5_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6ee56d8e03d8ffd78899877325d9acb5_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6ee56d8e03d8ffd78899877325d9acb5_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="268,5,460,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="509,5,760,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="809,5,1068,51"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1119,5,1332,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4b933459b4c3711a441a6b2f4f649b26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::assignRoleToUserGroup </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a>&#160;</td>
          <td class="paramname"><em>$userGroup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1Limitation_1_1RoleLimitation.html">RoleLimitation</a>&#160;</td>
          <td class="paramname"><em>$roleLimitation</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assigns a role to the given user group</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to assign a role</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\UserGroup</td><td class="paramname">$userGroup</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Limitation\RoleLimitation</td><td class="paramname">$roleLimitation</td><td>an optional role limitation (which is either a subtree limitation or section limitation) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00461">461</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00337">eZ\Publish\Core\Repository\RoleService\loadRole()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $userGroup-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $userGroup-&gt;id, <span class="stringliteral">&quot;UserGroup&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;canUser( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span>, $userGroup, $role ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $loadedRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $role-&gt;id );</div>
<div class="line">        $loadedUserGroup = $this-&gt;repository-&gt;getUserService()-&gt;loadUserGroup( $userGroup-&gt;id );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;assignRole(</div>
<div class="line">                $loadedUserGroup-&gt;id,</div>
<div class="line">                $loadedRole-&gt;id,</div>
<div class="line">                $roleLimitation ? array( $roleLimitation-&gt;getIdentifier() =&gt; $roleLimitation-&gt;limitationValues ) : null</div>
<div class="line">            );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a4b933459b4c3711a441a6b2f4f649b26_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a4b933459b4c3711a441a6b2f4f649b26_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a4b933459b4c3711a441a6b2f4f649b26_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a4b933459b4c3711a441a6b2f4f649b26_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="308,5,500,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="549,5,800,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="849,5,1108,51"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1159,5,1372,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8e0434f0a2e608ce2f287f5978c483c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::buildDomainPolicyObject </td>
          <td>(</td>
          <td class="paramtype">SPIPolicy&#160;</td>
          <td class="paramname"><em>$policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPIRole&#160;</td>
          <td class="paramname"><em>$role</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maps provided <a class="el" href="namespaceeZ_1_1Publish_1_1SPI.html">SPI</a> Policy value object to <a class="el" href="namespaceeZ_1_1Publish_1_1API.html">API</a> Policy value object</p>
<p>private Only accessible for other services and the internals of the repository </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\User\Policy</td><td class="paramname">$policy</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\User\Role&#160;|&#160;null</td><td class="paramname">$role</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00833">833</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00929">eZ\Publish\Core\Repository\RoleService\getLimitationType()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $policyLimitations = array();</div>
<div class="line">        <span class="keywordflow">if</span> ( $policy-&gt;module !== <span class="charliteral">&#39;*&#39;</span> &amp;&amp; $policy-&gt;function !== <span class="charliteral">&#39;*&#39;</span> &amp;&amp; $policy-&gt;limitations !== <span class="charliteral">&#39;*&#39;</span> )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">foreach</span> ( $policy-&gt;limitations as $identifier =&gt; $values )</div>
<div class="line">            {</div>
<div class="line">                $policyLimitations[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c">getLimitationType</a>( $identifier )-&gt;buildValue( $values );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> Policy(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;id&#39;</span> =&gt; (<span class="keywordtype">int</span>)$policy-&gt;id,</div>
<div class="line">                <span class="stringliteral">&#39;roleId&#39;</span> =&gt; $role !== null ? (<span class="keywordtype">int</span>)$role-&gt;id : (<span class="keywordtype">int</span>)$policy-&gt;roleId,</div>
<div class="line">                <span class="stringliteral">&#39;module&#39;</span> =&gt; $policy-&gt;module,</div>
<div class="line">                <span class="stringliteral">&#39;function&#39;</span> =&gt; $policy-&gt;function,</div>
<div class="line">                <span class="stringliteral">&#39;limitations&#39;</span> =&gt; $policyLimitations</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="316,5,529,51"/></map>
</div>
</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8e0434f0a2e608ce2f287f5978c483c7_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12aedfc7e5a1f413d6267c79ff09d781" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updatePolicy" alt="" coords="344,153,536,199"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#af0b133c7de24314d903b85f77cba1e37" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadPoliciesByUserId" alt="" coords="323,222,557,269"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="315,291,565,338"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12a7488c3b37644b1648230d35d93f30" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\createRole" alt="" coords="945,14,1137,61"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="644,257,836,303"/><area shape="rect" id="node25" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoleByIdentifier" alt="" coords="627,83,853,130"/><area shape="rect" id="node29" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a3662353f639f23d6f1b9402ee391793d" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoles" alt="" coords="644,326,836,373"/><area shape="rect" id="node31" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserRole\lAssignmentObject" alt="" coords="621,481,859,545"/><area shape="rect" id="node37" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserGroup\lRoleAssignmentObject" alt="" coords="615,569,865,633"/><area shape="rect" id="node13" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8f9b8e8f229a5e591d019b0450375871" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updateRole" alt="" coords="945,83,1137,130"/><area shape="rect" id="node15" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a84e195d93e0f85f9d97370ce07bcd928" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\addPolicy" alt="" coords="945,153,1137,199"/><area shape="rect" id="node17" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#adaa54576e2fb63283494578e73d3c881" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\removePolicy" alt="" coords="945,222,1137,269"/><area shape="rect" id="node19" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a5bb6b9d3296708235137a26ecf981f25" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\deleteRole" alt="" coords="945,291,1137,338"/><area shape="rect" id="node21" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a4b933459b4c3711a441a6b2f4f649b26" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUserGroup" alt="" coords="916,361,1167,407"/><area shape="rect" id="node23" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6ee56d8e03d8ffd78899877325d9acb5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUser" alt="" coords="935,430,1148,477"/><area shape="rect" id="node33" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a2933f3af27e9067c5ea3ad2f3b039c60" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments" alt="" coords="925,499,1157,546"/><area shape="rect" id="node35" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac16ebc7416e6ef7b869ce7ee026383fc" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUser" alt="" coords="925,569,1157,633"/><area shape="rect" id="node41" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#aa22758ff022c68ad38a797b2b52faba7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUserGroup" alt="" coords="925,657,1157,721"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a75e6966988ddeff98eaa3e80be8598cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::buildDomainRoleObject </td>
          <td>(</td>
          <td class="paramtype">SPIRole&#160;</td>
          <td class="paramname"><em>$role</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maps provided <a class="el" href="namespaceeZ_1_1Publish_1_1SPI.html">SPI</a> Role value object to <a class="el" href="namespaceeZ_1_1Publish_1_1API.html">API</a> Role value object</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\User\Role</td><td class="paramname">$role</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00807">807</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00833">eZ\Publish\Core\Repository\RoleService\buildDomainPolicyObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $rolePolicies = array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $role-&gt;policies as $spiPolicy )</div>
<div class="line">        {</div>
<div class="line">            $rolePolicies[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7">buildDomainPolicyObject</a>( $spiPolicy, $role );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> Role(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;id&#39;</span> =&gt; (<span class="keywordtype">int</span>)$role-&gt;id,</div>
<div class="line">                <span class="stringliteral">&#39;identifier&#39;</span> =&gt; $role-&gt;identifier,</div>
<div class="line">                <span class="stringliteral">&#39;policies&#39;</span> =&gt; $rolePolicies</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="305,5,564,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="615,5,828,51"/></map>
</div>
</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a75e6966988ddeff98eaa3e80be8598cd_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12a7488c3b37644b1648230d35d93f30" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\createRole" alt="" coords="636,5,828,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="335,247,527,294"/><area shape="rect" id="node19" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoleByIdentifier" alt="" coords="317,74,544,121"/><area shape="rect" id="node23" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a3662353f639f23d6f1b9402ee391793d" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoles" alt="" coords="335,317,527,363"/><area shape="rect" id="node25" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserRole\lAssignmentObject" alt="" coords="312,472,549,536"/><area shape="rect" id="node31" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserGroup\lRoleAssignmentObject" alt="" coords="305,560,556,624"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8f9b8e8f229a5e591d019b0450375871" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updateRole" alt="" coords="636,74,828,121"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a84e195d93e0f85f9d97370ce07bcd928" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\addPolicy" alt="" coords="636,143,828,190"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#adaa54576e2fb63283494578e73d3c881" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\removePolicy" alt="" coords="636,213,828,259"/><area shape="rect" id="node13" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a5bb6b9d3296708235137a26ecf981f25" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\deleteRole" alt="" coords="636,282,828,329"/><area shape="rect" id="node15" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a4b933459b4c3711a441a6b2f4f649b26" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUserGroup" alt="" coords="607,351,857,398"/><area shape="rect" id="node17" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6ee56d8e03d8ffd78899877325d9acb5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUser" alt="" coords="625,421,839,467"/><area shape="rect" id="node27" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a2933f3af27e9067c5ea3ad2f3b039c60" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments" alt="" coords="616,490,848,537"/><area shape="rect" id="node29" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac16ebc7416e6ef7b869ce7ee026383fc" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUser" alt="" coords="616,560,848,624"/><area shape="rect" id="node35" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#aa22758ff022c68ad38a797b2b52faba7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUserGroup" alt="" coords="616,648,848,712"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a90878e2641517da356c19510fbe90e27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::buildDomainUserGroupRoleAssignmentObject </td>
          <td>(</td>
          <td class="paramtype">SPIRoleAssignment&#160;</td>
          <td class="paramname"><em>$spiRoleAssignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a>&#160;</td>
          <td class="paramname"><em>$userGroup</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds the <a class="el" href="namespaceeZ_1_1Publish_1_1API.html">API</a> UserGroupRoleAssignment object from provided <a class="el" href="namespaceeZ_1_1Publish_1_1SPI.html">SPI</a> RoleAssignment object</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\User\RoleAssignment</td><td class="paramname">$spiRoleAssignment</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\UserGroup</td><td class="paramname">$userGroup</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00895">895</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00807">eZ\Publish\Core\Repository\RoleService\buildDomainRoleObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $limitation = null;</div>
<div class="line">        <span class="keywordflow">if</span> ( !empty( $spiRoleAssignment-&gt;limitationIdentifier ) )</div>
<div class="line">        {</div>
<div class="line">            $limitation = $this</div>
<div class="line">                -&gt;getLimitationType( $spiRoleAssignment-&gt;limitationIdentifier )</div>
<div class="line">                -&gt;buildValue( $spiRoleAssignment-&gt;values );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $userGroup = $userGroup ?: $this-&gt;repository-&gt;getUserService()-&gt;loadUserGroup( $spiRoleAssignment-&gt;contentId );</div>
<div class="line">        $role = $role ?: $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd">buildDomainRoleObject</a>( $spiRoleAssignment-&gt;role );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> UserGroupRoleAssignment(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;limitation&#39;</span> =&gt; $limitation,</div>
<div class="line">                <span class="stringliteral">&#39;role&#39;</span> =&gt; $role,</div>
<div class="line">                <span class="stringliteral">&#39;userGroup&#39;</span> =&gt; $userGroup</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="307,14,557,61"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="607,14,865,61"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="916,14,1129,61"/></map>
</div>
</p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a90878e2641517da356c19510fbe90e27_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a2933f3af27e9067c5ea3ad2f3b039c60" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments" alt="" coords="308,5,540,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac16ebc7416e6ef7b869ce7ee026383fc" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUser" alt="" coords="308,75,540,139"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#aa22758ff022c68ad38a797b2b52faba7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUserGroup" alt="" coords="308,163,540,227"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a722e54da8ce64e42a3229360133578f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::buildDomainUserRoleAssignmentObject </td>
          <td>(</td>
          <td class="paramtype">SPIRoleAssignment&#160;</td>
          <td class="paramname"><em>$spiRoleAssignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds the <a class="el" href="namespaceeZ_1_1Publish_1_1API.html">API</a> UserRoleAssignment object from provided <a class="el" href="namespaceeZ_1_1Publish_1_1SPI.html">SPI</a> RoleAssignment object</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\User\RoleAssignment</td><td class="paramname">$spiRoleAssignment</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\User</td><td class="paramname">$user</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00864">864</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00807">eZ\Publish\Core\Repository\RoleService\buildDomainRoleObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $limitation = null;</div>
<div class="line">        <span class="keywordflow">if</span> ( !empty( $spiRoleAssignment-&gt;limitationIdentifier ) )</div>
<div class="line">        {</div>
<div class="line">            $limitation = $this</div>
<div class="line">                -&gt;getLimitationType( $spiRoleAssignment-&gt;limitationIdentifier )</div>
<div class="line">                -&gt;buildValue( $spiRoleAssignment-&gt;values );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $user = $user ?: $this-&gt;repository-&gt;getUserService()-&gt;loadUser( $spiRoleAssignment-&gt;contentId );</div>
<div class="line">        $role = $role ?: $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd">buildDomainRoleObject</a>( $spiRoleAssignment-&gt;role );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> UserRoleAssignment(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;limitation&#39;</span> =&gt; $limitation,</div>
<div class="line">                <span class="stringliteral">&#39;role&#39;</span> =&gt; $role,</div>
<div class="line">                <span class="stringliteral">&#39;user&#39;</span> =&gt; $user</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="293,14,544,61"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="593,14,852,61"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="903,14,1116,61"/></map>
</div>
</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a722e54da8ce64e42a3229360133578f3_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a2933f3af27e9067c5ea3ad2f3b039c60" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments" alt="" coords="295,5,527,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac16ebc7416e6ef7b869ce7ee026383fc" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUser" alt="" coords="295,75,527,139"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac90388c7a3faf9fa3769305d22adde6e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::buildPersistencePolicyObject </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$limitations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates <a class="el" href="namespaceeZ_1_1Publish_1_1SPI.html">SPI</a> Policy value object from provided module, function and limitations</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$module</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$function</td><td></td></tr>
    <tr><td class="paramtype"></td><td class="paramname">\eZ\Publish\API\Repository\Values\User\Limitation[]</td><td>$limitations</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l01008">1008</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $limitationsToCreate = <span class="charliteral">&#39;*&#39;</span>;</div>
<div class="line">        <span class="keywordflow">if</span> ( $module !== <span class="charliteral">&#39;*&#39;</span> &amp;&amp; $function !== <span class="charliteral">&#39;*&#39;</span> &amp;&amp; !empty( $limitations ) )</div>
<div class="line">        {</div>
<div class="line">            $limitationsToCreate = array();</div>
<div class="line">            <span class="keywordflow">foreach</span> ( $limitations as $limitation )</div>
<div class="line">            {</div>
<div class="line">                $limitationsToCreate[$limitation-&gt;getIdentifier()] = $limitation-&gt;limitationValues;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> SPIPolicy(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;module&#39;</span> =&gt; $module,</div>
<div class="line">                <span class="stringliteral">&#39;function&#39;</span> =&gt; $function,</div>
<div class="line">                <span class="stringliteral">&#39;limitations&#39;</span> =&gt; $limitationsToCreate</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac90388c7a3faf9fa3769305d22adde6e_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac90388c7a3faf9fa3769305d22adde6e_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac90388c7a3faf9fa3769305d22adde6e_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac90388c7a3faf9fa3769305d22adde6e_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a84e195d93e0f85f9d97370ce07bcd928" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\addPolicy" alt="" coords="317,5,509,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12aedfc7e5a1f413d6267c79ff09d781" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updatePolicy" alt="" coords="317,74,509,121"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac7aad491d74e80f9fe92ed071e12c400" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildPersistenceRole\lObject" alt="" coords="297,144,529,208"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12a7488c3b37644b1648230d35d93f30" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\createRole" alt="" coords="580,153,772,199"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7aad491d74e80f9fe92ed071e12c400"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::buildPersistenceRoleObject </td>
          <td>(</td>
          <td class="paramtype">APIRoleCreateStruct&#160;</td>
          <td class="paramname"><em>$roleCreateStruct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates <a class="el" href="namespaceeZ_1_1Publish_1_1SPI.html">SPI</a> Role value object from provided <a class="el" href="namespaceeZ_1_1Publish_1_1API.html">API</a> role create struct</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\RoleCreateStruct</td><td class="paramname">$roleCreateStruct</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00979">979</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l01008">eZ\Publish\Core\Repository\RoleService\buildPersistencePolicyObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $policiesToCreate = array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $roleCreateStruct-&gt;getPolicies() as $policyCreateStruct )</div>
<div class="line">        {</div>
<div class="line">            $policiesToCreate[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e">buildPersistencePolicyObject</a>(</div>
<div class="line">                $policyCreateStruct-&gt;module,</div>
<div class="line">                $policyCreateStruct-&gt;function,</div>
<div class="line">                $policyCreateStruct-&gt;getLimitations()</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> SPIRole(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;identifier&#39;</span> =&gt; $roleCreateStruct-&gt;identifier,</div>
<div class="line">                <span class="stringliteral">&#39;policies&#39;</span> =&gt; $policiesToCreate</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildPersistencePolicy\lObject" alt="" coords="288,5,531,69"/></map>
</div>
</p>

<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac7aad491d74e80f9fe92ed071e12c400_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12a7488c3b37644b1648230d35d93f30" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\createRole" alt="" coords="289,14,481,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a12a7488c3b37644b1648230d35d93f30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::createRole </td>
          <td>(</td>
          <td class="paramtype">APIRoleCreateStruct&#160;</td>
          <td class="paramname"><em>$roleCreateStruct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new Role</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to create a role </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\InvalidArgumentException</td><td>if the name of the role already exists</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\RoleCreateStruct</td><td class="paramname">$roleCreateStruct</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00091">91</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00807">eZ\Publish\Core\Repository\RoleService\buildDomainRoleObject()</a>, <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00979">eZ\Publish\Core\Repository\RoleService\buildPersistenceRoleObject()</a>, and <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00359">eZ\Publish\Core\Repository\RoleService\loadRoleByIdentifier()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_string( $roleCreateStruct-&gt;identifier ) || empty( $roleCreateStruct-&gt;identifier ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;identifier&quot;</span>, $roleCreateStruct-&gt;identifier, <span class="stringliteral">&quot;RoleCreateStruct&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;create&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;create&#39;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $existingRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453">loadRoleByIdentifier</a>( $roleCreateStruct-&gt;identifier );</div>
<div class="line">            <span class="keywordflow">if</span> ( $existingRole !== null )</div>
<div class="line">                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException( <span class="stringliteral">&quot;roleCreateStruct&quot;</span>, <span class="stringliteral">&quot;role with specified identifier already exists&quot;</span> );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( APINotFoundException $e )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Do nothing</span></div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $spiRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac7aad491d74e80f9fe92ed071e12c400">buildPersistenceRoleObject</a>( $roleCreateStruct );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $createdRole = $this-&gt;userHandler-&gt;createRole( $spiRole );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd">buildDomainRoleObject</a>( $createdRole );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12a7488c3b37644b1648230d35d93f30_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12a7488c3b37644b1648230d35d93f30_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12a7488c3b37644b1648230d35d93f30_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12a7488c3b37644b1648230d35d93f30_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="531,5,781,51"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac7aad491d74e80f9fe92ed071e12c400" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildPersistenceRole\lObject" alt="" coords="249,104,481,168"/><area shape="rect" id="node13" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoleByIdentifier" alt="" coords="252,34,479,81"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="831,5,1089,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1140,5,1353,51"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildPersistencePolicy\lObject" alt="" coords="535,104,777,168"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5bb6b9d3296708235137a26ecf981f25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::deleteRole </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes the given role</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to delete this role</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00401">401</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00337">eZ\Publish\Core\Repository\RoleService\loadRole()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;delete&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;delete&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $loadedRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $role-&gt;id );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;deleteRole( $loadedRole-&gt;id );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a5bb6b9d3296708235137a26ecf981f25_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a5bb6b9d3296708235137a26ecf981f25_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a5bb6b9d3296708235137a26ecf981f25_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a5bb6b9d3296708235137a26ecf981f25_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="249,5,441,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="491,5,741,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="791,5,1049,51"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1100,5,1313,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a36a6fd8040d29e053f72285fee3a549c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::getLimitationType </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$identifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the LimitationType registered with the given identifier</p>
<p>Returns the correct implementation of <a class="el" href="namespaceeZ_1_1Publish_1_1API.html">API</a> <a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Limitation.html">Limitation</a> value object based on provided identifier</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$identifier</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\NotFoundException</td><td>if there is no LimitationType with $identifier </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a01043336e88cc4742d1dfe49b8e0ff91">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00929">929</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !isset( $this-&gt;settings[<span class="stringliteral">&#39;limitationTypes&#39;</span>][$identifier] ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> NotFoundException( <span class="stringliteral">&#39;Limitation&#39;</span>, $identifier );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;settings[<span class="stringliteral">&#39;limitationTypes&#39;</span>][$identifier];</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a36a6fd8040d29e053f72285fee3a549c_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a36a6fd8040d29e053f72285fee3a549c_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a36a6fd8040d29e053f72285fee3a549c_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a36a6fd8040d29e053f72285fee3a549c_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="271,222,529,269"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12aedfc7e5a1f413d6267c79ff09d781" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updatePolicy" alt="" coords="608,153,800,199"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#af0b133c7de24314d903b85f77cba1e37" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadPoliciesByUserId" alt="" coords="587,222,821,269"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="579,291,829,338"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12a7488c3b37644b1648230d35d93f30" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\createRole" alt="" coords="1209,14,1401,61"/><area shape="rect" id="node13" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="908,257,1100,303"/><area shape="rect" id="node27" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoleByIdentifier" alt="" coords="891,83,1117,130"/><area shape="rect" id="node31" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a3662353f639f23d6f1b9402ee391793d" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoles" alt="" coords="908,326,1100,373"/><area shape="rect" id="node33" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserRole\lAssignmentObject" alt="" coords="885,481,1123,545"/><area shape="rect" id="node39" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserGroup\lRoleAssignmentObject" alt="" coords="879,569,1129,633"/><area shape="rect" id="node15" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8f9b8e8f229a5e591d019b0450375871" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updateRole" alt="" coords="1209,83,1401,130"/><area shape="rect" id="node17" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a84e195d93e0f85f9d97370ce07bcd928" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\addPolicy" alt="" coords="1209,153,1401,199"/><area shape="rect" id="node19" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#adaa54576e2fb63283494578e73d3c881" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\removePolicy" alt="" coords="1209,222,1401,269"/><area shape="rect" id="node21" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a5bb6b9d3296708235137a26ecf981f25" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\deleteRole" alt="" coords="1209,291,1401,338"/><area shape="rect" id="node23" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a4b933459b4c3711a441a6b2f4f649b26" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUserGroup" alt="" coords="1180,361,1431,407"/><area shape="rect" id="node25" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6ee56d8e03d8ffd78899877325d9acb5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUser" alt="" coords="1199,430,1412,477"/><area shape="rect" id="node35" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a2933f3af27e9067c5ea3ad2f3b039c60" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments" alt="" coords="1189,499,1421,546"/><area shape="rect" id="node37" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac16ebc7416e6ef7b869ce7ee026383fc" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUser" alt="" coords="1189,569,1421,633"/><area shape="rect" id="node43" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#aa22758ff022c68ad38a797b2b52faba7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getRoleAssignments\lForUserGroup" alt="" coords="1189,657,1421,721"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8d68b0f43a3975614c00612522071b66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::getLimitationTypesByModuleFunction </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the LimitationType's assigned to a given module/function</p>
<p>Typically used for:</p>
<ul>
<li>Internal validation limitation value use on Policies</li>
<li>Role admin gui for editing policy limitations incl list limitation options via valueSchema()</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$module</td><td>Legacy name of "controller", it's a unique identifier like "content" </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$function</td><td>Legacy name of a controller "action", it's a unique within the controller like "read"</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>[]</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\BadStateException</td><td>If module/function to limitation type mapping refers to a non existing identifier. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a70d55b5f348072d2b5ab5b7cf4ba8a28">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00952">952</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( empty( $this-&gt;settings[<span class="stringliteral">&#39;limitationMap&#39;</span>][$module][$function] ) )</div>
<div class="line">            <span class="keywordflow">return</span> array();</div>
<div class="line"></div>
<div class="line">        $types = array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $this-&gt;settings[<span class="stringliteral">&#39;limitationMap&#39;</span>][$module][$function] as $identifier )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( !isset( $this-&gt;settings[<span class="stringliteral">&#39;limitationTypes&#39;</span>][$identifier] ) )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">throw</span> new \eZ\Publish\Core\Base\Exceptions\BadStateException(</div>
<div class="line">                    <span class="stringliteral">&#39;$identifier&#39;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;&#39;{$identifier}&#39; does not exists but was configured as limitation on {$module}/{$function}&quot;</span></div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">            $types[$identifier] = $this-&gt;settings[<span class="stringliteral">&#39;limitationTypes&#39;</span>][$identifier];</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $types;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2933f3af27e9067c5ea3ad2f3b039c60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::getRoleAssignments </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the assigned user and user groups to this role</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to read a role</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>[] </dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00617">617</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00056">eZ\Publish\Core\Repository\RoleService\$userHandler</a>, <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00895">eZ\Publish\Core\Repository\RoleService\buildDomainUserGroupRoleAssignmentObject()</a>, and <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00864">eZ\Publish\Core\Repository\RoleService\buildDomainUserRoleAssignmentObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0b6b76cb79fea1e516d18c969ec75ca8">$userHandler</a> = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0b6b76cb79fea1e516d18c969ec75ca8">$this-&gt;userHandler</a>;</div>
<div class="line">        $spiRole = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0b6b76cb79fea1e516d18c969ec75ca8">$userHandler</a>-&gt;loadRole( $role-&gt;id );</div>
<div class="line"></div>
<div class="line">        $userService = $this-&gt;repository-&gt;getUserService();</div>
<div class="line"></div>
<div class="line">        $roleAssignments = array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $spiRole-&gt;groupIds as $groupId )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// $spiRole-&gt;groupIds can contain both group and user IDs</span></div>
<div class="line">            <span class="comment">// We&#39;ll check if the ID belongs to group, if not, see if it belongs to user</span></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                $userGroup = $userService-&gt;loadUserGroup( $groupId );</div>
<div class="line"></div>
<div class="line">                $spiRoleAssignments = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0b6b76cb79fea1e516d18c969ec75ca8">$userHandler</a>-&gt;loadRoleAssignmentsByGroupId( $userGroup-&gt;id );</div>
<div class="line">                <span class="keywordflow">foreach</span> ( $spiRoleAssignments as $spiRoleAssignment )</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span> ( $spiRoleAssignment-&gt;role-&gt;id == $role-&gt;id )</div>
<div class="line">                    {</div>
<div class="line">                        $roleAssignments[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27">buildDomainUserGroupRoleAssignmentObject</a>(</div>
<div class="line">                            $spiRoleAssignment,</div>
<div class="line">                            $userGroup,</div>
<div class="line">                            $role</div>
<div class="line">                        );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> ( APINotFoundException $e )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">try</span></div>
<div class="line">                {</div>
<div class="line">                    $user = $userService-&gt;loadUser( $groupId );</div>
<div class="line"></div>
<div class="line">                    $spiRoleAssignments = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0b6b76cb79fea1e516d18c969ec75ca8">$userHandler</a>-&gt;loadRoleAssignmentsByGroupId( $user-&gt;id );</div>
<div class="line">                    <span class="keywordflow">foreach</span> ( $spiRoleAssignments as $spiRoleAssignment )</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">if</span> ( $spiRoleAssignment-&gt;role-&gt;id == $role-&gt;id )</div>
<div class="line">                        {</div>
<div class="line">                            $roleAssignments[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3">buildDomainUserRoleAssignmentObject</a>(</div>
<div class="line">                                $spiRoleAssignment,</div>
<div class="line">                                $user,</div>
<div class="line">                                $role</div>
<div class="line">                            );</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> ( APINotFoundException $e )</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Do nothing</span></div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $roleAssignments;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a2933f3af27e9067c5ea3ad2f3b039c60_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a2933f3af27e9067c5ea3ad2f3b039c60_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a2933f3af27e9067c5ea3ad2f3b039c60_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a2933f3af27e9067c5ea3ad2f3b039c60_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserGroup\lRoleAssignmentObject" alt="" coords="289,5,540,69"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserRole\lAssignmentObject" alt="" coords="296,93,533,157"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="589,58,840,105"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="889,58,1148,105"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1199,58,1412,105"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac16ebc7416e6ef7b869ce7ee026383fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::getRoleAssignmentsForUser </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$inherited</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the roles assigned to the given user</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\User</td><td class="paramname">$user</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$inherited</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\Core\Base\Exceptions\UnauthorizedException</td><td>If the current user is not allowed to read a role </td></tr>
    <tr><td class="paramname">\eZ\Publish\Core\Base\Exceptions\InvalidArgumentValue</td><td>On invalid User object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>[] </dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00692">692</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00895">eZ\Publish\Core\Repository\RoleService\buildDomainUserGroupRoleAssignmentObject()</a>, and <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00864">eZ\Publish\Core\Repository\RoleService\buildDomainUserRoleAssignmentObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $user-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $user-&gt;id, <span class="stringliteral">&quot;User&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $roleAssignments = array();</div>
<div class="line">        $spiRoleAssignments = $this-&gt;userHandler-&gt;loadRoleAssignmentsByGroupId( $user-&gt;id, $inherited );</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $spiRoleAssignments as $spiRoleAssignment )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( !$inherited || $spiRoleAssignment-&gt;contentId == $user-&gt;id )</div>
<div class="line">                $roleAssignments[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3">buildDomainUserRoleAssignmentObject</a>( $spiRoleAssignment, $user );</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                $roleAssignments[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27">buildDomainUserGroupRoleAssignmentObject</a>( $spiRoleAssignment );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $roleAssignments;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac16ebc7416e6ef7b869ce7ee026383fc_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac16ebc7416e6ef7b869ce7ee026383fc_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac16ebc7416e6ef7b869ce7ee026383fc_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_ac16ebc7416e6ef7b869ce7ee026383fc_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserGroup\lRoleAssignmentObject" alt="" coords="289,5,540,69"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a722e54da8ce64e42a3229360133578f3" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserRole\lAssignmentObject" alt="" coords="296,93,533,157"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="589,58,840,105"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="889,58,1148,105"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1199,58,1412,105"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa22758ff022c68ad38a797b2b52faba7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::getRoleAssignmentsForUserGroup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a>&#160;</td>
          <td class="paramname"><em>$userGroup</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the roles assigned to the given user group</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to read a role</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\UserGroup</td><td class="paramname">$userGroup</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>[] </dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a640bdbb8670bba8cbe8cbec2cbbd9762">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00722">722</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00895">eZ\Publish\Core\Repository\RoleService\buildDomainUserGroupRoleAssignmentObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $userGroup-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $userGroup-&gt;id, <span class="stringliteral">&quot;UserGroup&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $roleAssignments = array();</div>
<div class="line">        $spiRoleAssignments = $this-&gt;userHandler-&gt;loadRoleAssignmentsByGroupId( $userGroup-&gt;id );</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $spiRoleAssignments as $spiRoleAssignment )</div>
<div class="line">        {</div>
<div class="line">            $roleAssignments[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27">buildDomainUserGroupRoleAssignmentObject</a>( $spiRoleAssignment, $userGroup );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $roleAssignments;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_aa22758ff022c68ad38a797b2b52faba7_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_aa22758ff022c68ad38a797b2b52faba7_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_aa22758ff022c68ad38a797b2b52faba7_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_aa22758ff022c68ad38a797b2b52faba7_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a90878e2641517da356c19510fbe90e27" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainUserGroup\lRoleAssignmentObject" alt="" coords="289,5,540,69"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="589,14,840,61"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="889,14,1148,61"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1199,14,1412,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af0b133c7de24314d903b85f77cba1e37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::loadPoliciesByUserId </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads all policies from roles which are assigned to a user or to user groups to which the user belongs</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\NotFoundException</td><td>if a user with the given id was not found</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>[] </dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a7c6fe4b8ab63abe18aca9ee2401d03db">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00433">433</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00833">eZ\Publish\Core\Repository\RoleService\buildDomainPolicyObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $userId ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;userId&quot;</span>, $userId );</div>
<div class="line"></div>
<div class="line">        $spiPolicies = $this-&gt;userHandler-&gt;loadPoliciesByUserId( $userId );</div>
<div class="line"></div>
<div class="line">        $policies = array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $spiPolicies as $spiPolicy )</div>
<div class="line">        {</div>
<div class="line">            $policies[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7">buildDomainPolicyObject</a>( $spiPolicy );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( empty( $policies ) )</div>
<div class="line">            $this-&gt;userHandler-&gt;load( $userId );<span class="comment">// For NotFoundException in case userId is invalid</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $policies;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_af0b133c7de24314d903b85f77cba1e37_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_af0b133c7de24314d903b85f77cba1e37_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_af0b133c7de24314d903b85f77cba1e37_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_af0b133c7de24314d903b85f77cba1e37_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="289,5,548,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="599,5,812,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6be689764e7eef0021981bc981bd80d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::loadRole </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads a role for the given id</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to read this role </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\NotFoundException</td><td>if a role with the given id was not found</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#ae78f2ec7dac1dfc66182e412d6ffedb7">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00337">337</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00807">eZ\Publish\Core\Repository\RoleService\buildDomainRoleObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $id );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $spiRole = $this-&gt;userHandler-&gt;loadRole( $id );</div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd">buildDomainRoleObject</a>( $spiRole );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="248,5,499,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="548,5,807,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="857,5,1071,51"/></map>
</div>
</p>

<p><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a6be689764e7eef0021981bc981bd80d5_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8f9b8e8f229a5e591d019b0450375871" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updateRole" alt="" coords="279,5,471,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a84e195d93e0f85f9d97370ce07bcd928" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\addPolicy" alt="" coords="279,74,471,121"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#adaa54576e2fb63283494578e73d3c881" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\removePolicy" alt="" coords="279,143,471,190"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a5bb6b9d3296708235137a26ecf981f25" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\deleteRole" alt="" coords="279,213,471,259"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a4b933459b4c3711a441a6b2f4f649b26" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUserGroup" alt="" coords="249,282,500,329"/><area shape="rect" id="node13" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6ee56d8e03d8ffd78899877325d9acb5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\assignRoleToUser" alt="" coords="268,351,481,398"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0675d71cc1059b889199ab6ee9ea0453"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::loadRoleByIdentifier </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$identifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads a role for the given identifier</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to read this role </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\NotFoundException</td><td>if a role with the given name was not found</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$identifier</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a8f1b3f5d5dad1a92f6101a3c6f4fee90">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00359">359</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00807">eZ\Publish\Core\Repository\RoleService\buildDomainRoleObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_string( $identifier ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;identifier&quot;</span>, $identifier );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $spiRole = $this-&gt;userHandler-&gt;loadRoleByIdentifier( $identifier );</div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd">buildDomainRoleObject</a>( $spiRole );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="280,5,531,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="580,5,839,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="889,5,1103,51"/></map>
</div>
</p>

<p><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_icgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a0675d71cc1059b889199ab6ee9ea0453_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a12a7488c3b37644b1648230d35d93f30" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\createRole" alt="" coords="281,5,473,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8f9b8e8f229a5e591d019b0450375871" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\updateRole" alt="" coords="281,74,473,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3662353f639f23d6f1b9402ee391793d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::loadRoles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads all roles</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to read the roles</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>[] </dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#ab35de42f9c1fd81358414e63a816f72d">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00378">378</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00807">eZ\Publish\Core\Repository\RoleService\buildDomainRoleObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;read&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $spiRoles = $this-&gt;userHandler-&gt;loadRoles();</div>
<div class="line"></div>
<div class="line">        $roles = array();</div>
<div class="line">        <span class="keywordflow">foreach</span> ( $spiRoles as $spiRole )</div>
<div class="line">        {</div>
<div class="line">            $roles[] = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd">buildDomainRoleObject</a>( $spiRole );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $roles;</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a3662353f639f23d6f1b9402ee391793d_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a3662353f639f23d6f1b9402ee391793d_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a3662353f639f23d6f1b9402ee391793d_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a3662353f639f23d6f1b9402ee391793d_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="248,5,499,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="548,5,807,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="857,5,1071,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae90537c9106e192a68d6ffb29a512ff6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::newPolicyCreateStruct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Instantiates a policy create class</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$module</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$function</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a02e7abcd564e55dd5433d5a385a62369">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00765">765</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> PolicyCreateStruct(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;module&#39;</span> =&gt; $module,</div>
<div class="line">                <span class="stringliteral">&#39;function&#39;</span> =&gt; $function,</div>
<div class="line">                <span class="stringliteral">&#39;limitations&#39;</span> =&gt; array()</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abc44bafc34bc2a927879de662c17be12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::newPolicyUpdateStruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Instantiates a policy update class</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a8bd0f8f79aac1cca9ef37642293744ab">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00781">781</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> PolicyUpdateStruct(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;limitations&#39;</span> =&gt; array()</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abcc22f2b418085a2768fd0424eb7039c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::newRoleCreateStruct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Instantiates a role create class</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a249d03d5f0d89bb5200fd89b3a828e43">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00747">747</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> RoleCreateStruct(</div>
<div class="line">            array(</div>
<div class="line">                <span class="stringliteral">&#39;identifier&#39;</span> =&gt; $name,</div>
<div class="line">                <span class="stringliteral">&#39;policies&#39;</span> =&gt; array()</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af0bf2c3181f15336df31056bc95fc6b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::newRoleUpdateStruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Instantiates a policy update class</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1API_1_1Repository_1_1RoleService.html#a7cfc6081da98be3098c87f17096dc9ac">eZ\Publish\API\Repository\RoleService</a>.</p>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00795">795</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> RoleUpdateStruct();</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adaa54576e2fb63283494578e73d3c881"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::removePolicy </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">APIPolicy&#160;</td>
          <td class="paramname"><em>$policy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>removes a policy from the role</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to remove a policy</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Policy</td><td class="paramname">$policy</td><td>the policy to remove from the role</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the updated role </dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00247">247</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00337">eZ\Publish\Core\Repository\RoleService\loadRole()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $policy-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $policy-&gt;id, <span class="stringliteral">&quot;Policy&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $loadedRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $role-&gt;id );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;removePolicy( $loadedRole-&gt;id, $policy-&gt;id );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $loadedRole-&gt;id );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_adaa54576e2fb63283494578e73d3c881_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_adaa54576e2fb63283494578e73d3c881_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_adaa54576e2fb63283494578e73d3c881_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_adaa54576e2fb63283494578e73d3c881_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="249,5,441,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="491,5,741,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="791,5,1049,51"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1100,5,1313,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a02a1eda0b26806c1366a4aa98254e832"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::unassignRoleFromUser </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>removes a role from the given user.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to remove a role </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\InvalidArgumentException</td><td>If the role is not assigned to the user</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00579">579</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $user-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $user-&gt;id, <span class="stringliteral">&quot;User&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;canUser( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span>, $user, $role ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $spiRole = $this-&gt;userHandler-&gt;loadRole( $role-&gt;id );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !in_array( $user-&gt;id, $spiRole-&gt;groupIds ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException( <span class="stringliteral">&quot;user&quot;</span>, <span class="stringliteral">&quot;role is not assigned to the user&quot;</span> );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;unAssignRole( $user-&gt;id, $role-&gt;id );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae68957f22acf9d72d0bfddcfd697212a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::unassignRoleFromUserGroup </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1UserGroup.html">UserGroup</a>&#160;</td>
          <td class="paramname"><em>$userGroup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>removes a role from the given user group.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to remove a role </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\InvalidArgumentException</td><td>If the role is not assigned to the given user group</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\UserGroup</td><td class="paramname">$userGroup</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00501">501</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $userGroup-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $userGroup-&gt;id, <span class="stringliteral">&quot;UserGroup&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;canUser( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span>, $userGroup, $role ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;assign&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $spiRole = $this-&gt;userHandler-&gt;loadRole( $role-&gt;id );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !in_array( $userGroup-&gt;id, $spiRole-&gt;groupIds ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException( <span class="stringliteral">&quot;userGroup&quot;</span>, <span class="stringliteral">&quot;role is not assigned to the user group&quot;</span> );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;unAssignRole( $userGroup-&gt;id, $role-&gt;id );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a12aedfc7e5a1f413d6267c79ff09d781"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::updatePolicy </td>
          <td>(</td>
          <td class="paramtype">APIPolicy&#160;</td>
          <td class="paramname"><em>$policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">APIPolicyUpdateStruct&#160;</td>
          <td class="paramname"><em>$policyUpdateStruct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the limitations of a policy. The module and function cannot be changed and the limitations are replaced by the ones in $roleUpdateStruct</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to update a policy</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\PolicyUpdateStruct</td><td class="paramname">$policyUpdateStruct</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Policy</td><td class="paramname">$policy</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00286">286</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00833">eZ\Publish\Core\Repository\RoleService\buildDomainPolicyObject()</a>, and <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l01008">eZ\Publish\Core\Repository\RoleService\buildPersistencePolicyObject()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $policy-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $policy-&gt;id, <span class="stringliteral">&quot;Policy&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $policy-&gt;roleId ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;roleId&quot;</span>, $policy-&gt;roleId, <span class="stringliteral">&quot;Policy&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_string( $policy-&gt;module ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;module&quot;</span>, $policy-&gt;module, <span class="stringliteral">&quot;Policy&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( !is_string( $policy-&gt;function ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;function&quot;</span>, $policy-&gt;function, <span class="stringliteral">&quot;Policy&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> );</div>
<div class="line"></div>
<div class="line">        $spiPolicy = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e">buildPersistencePolicyObject</a>(</div>
<div class="line">            $policy-&gt;module,</div>
<div class="line">            $policy-&gt;function,</div>
<div class="line">            $policyUpdateStruct-&gt;getLimitations()</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        $spiPolicy-&gt;id = $policy-&gt;id;</div>
<div class="line">        $spiPolicy-&gt;roleId = $policy-&gt;roleId;</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;updatePolicy( $spiPolicy );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7">buildDomainPolicyObject</a>( $spiPolicy );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12aedfc7e5a1f413d6267c79ff09d781_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12aedfc7e5a1f413d6267c79ff09d781_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12aedfc7e5a1f413d6267c79ff09d781_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a12aedfc7e5a1f413d6267c79ff09d781_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="249,5,508,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#ac90388c7a3faf9fa3769305d22adde6e" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildPersistencePolicy\lObject" alt="" coords="257,75,500,139"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="559,5,772,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8f9b8e8f229a5e591d019b0450375871"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::updateRole </td>
          <td>(</td>
          <td class="paramtype">APIRole&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1API_1_1Repository_1_1Values_1_1User_1_1RoleUpdateStruct.html">RoleUpdateStruct</a>&#160;</td>
          <td class="paramname"><em>$roleUpdateStruct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the name of the role</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\UnauthorizedException</td><td>if the authenticated user is not allowed to update a role </td></tr>
    <tr><td class="paramname">\eZ\Publish\API\Repository\Exceptions\InvalidArgumentException</td><td>if the name of the role already exists</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\Role</td><td class="paramname">$role</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\API\Repository\Values\User\RoleUpdateStruct</td><td class="paramname">$roleUpdateStruct</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00138">138</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

<p>References <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00337">eZ\Publish\Core\Repository\RoleService\loadRole()</a>, and <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00359">eZ\Publish\Core\Repository\RoleService\loadRoleByIdentifier()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( !is_numeric( $role-&gt;id ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;id&quot;</span>, $role-&gt;id, <span class="stringliteral">&quot;Role&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $roleUpdateStruct-&gt;identifier !== null &amp;&amp; !is_string( $roleUpdateStruct-&gt;identifier ) )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentValue( <span class="stringliteral">&quot;identifier&quot;</span>, $roleUpdateStruct-&gt;identifier, <span class="stringliteral">&quot;RoleUpdateStruct&quot;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $this-&gt;repository-&gt;hasAccess( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> ) !== true )</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnauthorizedException( <span class="stringliteral">&#39;role&#39;</span>, <span class="stringliteral">&#39;update&#39;</span> );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $roleUpdateStruct-&gt;identifier !== null )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                $existingRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453">loadRoleByIdentifier</a>( $roleUpdateStruct-&gt;identifier );</div>
<div class="line">                <span class="keywordflow">if</span> ( $existingRole !== null )</div>
<div class="line">                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException( <span class="stringliteral">&quot;roleUpdateStruct&quot;</span>, <span class="stringliteral">&quot;role with specified identifier already exists&quot;</span> );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> ( APINotFoundException $e )</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Do nothing</span></div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $loadedRole = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $role-&gt;id );</div>
<div class="line"></div>
<div class="line">        $this-&gt;repository-&gt;beginTransaction();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            $this-&gt;userHandler-&gt;updateRole(</div>
<div class="line">                <span class="keyword">new</span> SPIRoleUpdateStruct(</div>
<div class="line">                    array(</div>
<div class="line">                        <span class="stringliteral">&#39;id&#39;</span> =&gt; $loadedRole-&gt;id,</div>
<div class="line">                        <span class="stringliteral">&#39;identifier&#39;</span> =&gt; $roleUpdateStruct-&gt;identifier ?: $role-&gt;identifier</div>
<div class="line">                    )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line">            $this-&gt;repository-&gt;commit();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> ( \Exception $e )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;repository-&gt;rollback();</div>
<div class="line">            <span class="keywordflow">throw</span> $e;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5">loadRole</a>( $loadedRole-&gt;id );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8f9b8e8f229a5e591d019b0450375871_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8f9b8e8f229a5e591d019b0450375871_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8f9b8e8f229a5e591d019b0450375871_cgraph" id="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService_a8f9b8e8f229a5e591d019b0450375871_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a6be689764e7eef0021981bc981bd80d5" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRole" alt="" coords="265,5,457,51"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a0675d71cc1059b889199ab6ee9ea0453" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\loadRoleByIdentifier" alt="" coords="248,74,475,121"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a75e6966988ddeff98eaa3e80be8598cd" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainRoleObject" alt="" coords="523,39,773,86"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a8e0434f0a2e608ce2f287f5978c483c7" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\buildDomainPolicyObject" alt="" coords="823,39,1081,86"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html#a36a6fd8040d29e053f72285fee3a549c" title="eZ\\Publish\\Core\\Repository\l\\RoleService\\getLimitationType" alt="" coords="1132,39,1345,86"/></map>
</div>
</p>

</div>
</div>
<h2>Member Data Documentation</h2>
<a class="anchor" id="ad258dd31f3e23611ed7763923aa7c9e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::$repository</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00051">51</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad62e8f9f9bbd9d222d8cae14816b6eb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::$settings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00061">61</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

</div>
</div>
<a class="anchor" id="a0b6b76cb79fea1e516d18c969ec75ca8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\Repository\RoleService::$userHandler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Core_2Repository_2RoleService_8php_source.html#l00056">56</a> of file <a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/var/lib/jenkins/jobs/PAPI-doxygen-master/workspace/eZ/Publish/Core/Repository/<a class="el" href="Core_2Repository_2RoleService_8php_source.html">RoleService.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceeZ.html">eZ</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish.html">Publish</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core.html">Core</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1Repository.html">Repository</a></li><li class="navelem"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1Repository_1_1RoleService.html">RoleService</a></li>
    <li class="footer">Generated on Tue Dec 11 2012 00:02:22 for ezp-next by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
