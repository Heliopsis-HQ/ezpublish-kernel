<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ezp-next: eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ezp-next
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage__inherit__graph.png" border="0" usemap="#eZ_0CPublish_0CCore_0CFieldType_0CBinaryBase_0CBinaryBaseStorage_inherit__map" alt="Inheritance graph"/></div>
<map name="eZ_0CPublish_0CCore_0CFieldType_0CBinaryBase_0CBinaryBaseStorage_inherit__map" id="eZ_0CPublish_0CCore_0CFieldType_0CBinaryBase_0CBinaryBaseStorage_inherit__map">
<area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryFile_1_1BinaryFileStorage.html" title="eZ\\Publish\\Core\\FieldType\l\\BinaryFile\\BinaryFileStorage" alt="" coords="735,5,935,51"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1Media_1_1MediaStorage.html" title="eZ\\Publish\\Core\\FieldType\l\\Media\\MediaStorage" alt="" coords="744,74,925,121"/><area shape="rect" id="node2" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html" title="eZ\\Publish\\Core\\FieldType\l\\GatewayBasedStorage" alt="" coords="228,39,409,86"/><area shape="rect" id="node4" href="interfaceeZ_1_1Publish_1_1SPI_1_1FieldType_1_1FieldStorage.html" title="eZ\\Publish\\SPI\\FieldType\l\\FieldStorage" alt="" coords="5,39,179,86"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage__coll__graph.png" border="0" usemap="#eZ_0CPublish_0CCore_0CFieldType_0CBinaryBase_0CBinaryBaseStorage_coll__map" alt="Collaboration graph"/></div>
<map name="eZ_0CPublish_0CCore_0CFieldType_0CBinaryBase_0CBinaryBaseStorage_coll__map" id="eZ_0CPublish_0CCore_0CFieldType_0CBinaryBase_0CBinaryBaseStorage_coll__map">
<area shape="rect" id="node2" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html" title="eZ\\Publish\\Core\\FieldType\l\\GatewayBasedStorage" alt="" coords="27,102,208,149"/><area shape="rect" id="node4" href="interfaceeZ_1_1Publish_1_1SPI_1_1FieldType_1_1FieldStorage.html" title="eZ\\Publish\\SPI\\FieldType\l\\FieldStorage" alt="" coords="31,6,204,53"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae25da27dd45cc95cfaf103c426142cc6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#ae25da27dd45cc95cfaf103c426142cc6">__construct</a> (array $gateways, <a class="el" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html">IOService</a> $<a class="el" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html">IOService</a>, <a class="el" href="classeZ_1_1Publish_1_1SPI_1_1FieldType_1_1BinaryBase_1_1PathGenerator.html">PathGenerator</a> $pathGenerator, <a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1IO_1_1MimeTypeDetector.html">MimeTypeDetector</a> $mimeTypeDetector)</td></tr>
<tr class="memitem:aad8a40fd82782f4fa7dce60d1b1ea867"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#aad8a40fd82782f4fa7dce60d1b1ea867">storeFieldData</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a> $versionInfo, <a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a> $field, array $context)</td></tr>
<tr class="memitem:ab61b2841f29283d95c31174f10eca390"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#ab61b2841f29283d95c31174f10eca390">copyLegacyField</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a> $versionInfo, <a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a> $field, <a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a> $originalField, array $context)</td></tr>
<tr class="memitem:af992f43e01424d39bef2b5e93ddf7f5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#af992f43e01424d39bef2b5e93ddf7f5d">getFieldData</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a> $versionInfo, <a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a> $field, array $context)</td></tr>
<tr class="memitem:a95f5d9c0d00ddf8250b1cf78cdb090b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a95f5d9c0d00ddf8250b1cf78cdb090b1">deleteFieldData</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a> $versionInfo, array $fieldIds, array $context)</td></tr>
<tr class="memitem:afcd466e1cb7e5cb79cf7d8c8425d2b52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#afcd466e1cb7e5cb79cf7d8c8425d2b52">hasFieldData</a> ()</td></tr>
<tr class="memitem:a344e63f6bfd1280d24b9d43b5ce166fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a344e63f6bfd1280d24b9d43b5ce166fb">getIndexData</a> (<a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a> $versionInfo, <a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a> $field, array $context)</td></tr>
<tr class="inherit_header pub_methods_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage')"><img src="closed.png" alt="-"/>&nbsp;Public Member Functions inherited from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html">eZ\Publish\Core\FieldType\GatewayBasedStorage</a></td></tr>
<tr class="memitem:afef3e665d4bfd22ed6f59ccdcfd90f5c inherit pub_methods_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#afef3e665d4bfd22ed6f59ccdcfd90f5c">__construct</a> (array $gateways=array())</td></tr>
<tr class="memitem:a9f302701f55b8463e9116ca325afb842 inherit pub_methods_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#a9f302701f55b8463e9116ca325afb842">addGateway</a> ($identifier, <a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1StorageGateway.html">StorageGateway</a> $gateway)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a217f86fdcaa21e917345043ed27e7fff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a217f86fdcaa21e917345043ed27e7fff">removeOldFile</a> ($fieldId, $versionNo, array $context)</td></tr>
<tr class="inherit_header pro_methods_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage')"><img src="closed.png" alt="-"/>&nbsp;Protected Member Functions inherited from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html">eZ\Publish\Core\FieldType\GatewayBasedStorage</a></td></tr>
<tr class="memitem:ae3d32c56c1ce666534c10f0fedae806b inherit pro_methods_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b">getGateway</a> (array $context)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a8e88d1b3319a3066b09c3f48b0edfc50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a8e88d1b3319a3066b09c3f48b0edfc50">$IOService</a></td></tr>
<tr class="memitem:a1afdd0db82346acbe6b145d142b4e8d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a1afdd0db82346acbe6b145d142b4e8d2">$pathGenerator</a></td></tr>
<tr class="memitem:a464eb9fd6595aeed8bc570164a025a48"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a464eb9fd6595aeed8bc570164a025a48">$mimeTypeDetector</a></td></tr>
<tr class="inherit_header pro_attribs_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage')"><img src="closed.png" alt="-"/>&nbsp;Protected Attributes inherited from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html">eZ\Publish\Core\FieldType\GatewayBasedStorage</a></td></tr>
<tr class="memitem:a1047f9cdfb979fcf500659a6e21c9ebc inherit pro_attribs_classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#a1047f9cdfb979fcf500659a6e21c9ebc">$gateways</a></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Storage for binary files </p>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00022">22</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae25da27dd45cc95cfaf103c426142cc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::__construct </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$gateways</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html">IOService</a>&#160;</td>
          <td class="paramname"><em>$IOService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1FieldType_1_1BinaryBase_1_1PathGenerator.html">PathGenerator</a>&#160;</td>
          <td class="paramname"><em>$pathGenerator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1IO_1_1MimeTypeDetector.html">MimeTypeDetector</a>&#160;</td>
          <td class="paramname"><em>$mimeTypeDetector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct from gateways</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">\eZ\Publish\Core\FieldType\StorageGateway[]</td><td>$gateways </td></tr>
    <tr><td class="paramtype">IOService</td><td class="paramname">$IOService</td><td></td></tr>
    <tr><td class="paramtype"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1PathGenerator.html">PathGenerator</a></td><td class="paramname">$pathGenerator</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00046">46</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

<p>References <a class="el" href="BinaryBaseStorage_8php_source.html#l00029">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage\$IOService</a>, <a class="el" href="BinaryBaseStorage_8php_source.html#l00037">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage\$mimeTypeDetector</a>, and <a class="el" href="BinaryBaseStorage_8php_source.html#l00032">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage\$pathGenerator</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#ae25da27dd45cc95cfaf103c426142cc6">parent::__construct</a>( <a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#a1047f9cdfb979fcf500659a6e21c9ebc">$gateways</a> );</div>
<div class="line">        $this-&gt;IOService = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a8e88d1b3319a3066b09c3f48b0edfc50">$IOService</a>;</div>
<div class="line">        $this-&gt;pathGenerator = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a1afdd0db82346acbe6b145d142b4e8d2">$pathGenerator</a>;</div>
<div class="line">        $this-&gt;mimeTypeDetector = <a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a464eb9fd6595aeed8bc570164a025a48">$mimeTypeDetector</a>;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="ab61b2841f29283d95c31174f10eca390"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::copyLegacyField </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a>&#160;</td>
          <td class="paramname"><em>$versionInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a>&#160;</td>
          <td class="paramname"><em>$field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a>&#160;</td>
          <td class="paramname"><em>$originalField</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is used exclusively by Legacy Storage to copy external data of existing field in main language to the untranslatable field not passed in create or update struct, but created implicitly in storage layer.</p>
<p>By default the method falls back to the eZ\Publish\SPI\FieldType\FieldStorage::storeFieldData().Externalstoragesimplementthismethodasneeded.@param\eZ\Publish\SPI\Persistence\Content\VersionInfo$versionInfo@param\eZ\Publish\SPI\Persistence\Content\Field$field@param\eZ\Publish\SPI\Persistence\Content\Field$originalField@paramarray$context@returnnull|booleanSameas@link\eZ\Publish\SPI\FieldType\FieldStorage::storeFieldData().</p>

<p>Reimplemented from <a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#addabfea5d308120993be0a638bd95c91">eZ\Publish\Core\FieldType\GatewayBasedStorage</a>.</p>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00121">121</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

<p>References <a class="el" href="GatewayBasedStorage_8php_source.html#l00069">eZ\Publish\Core\FieldType\GatewayBasedStorage\getGateway()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( $originalField-&gt;value-&gt;data === null )</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// field translations have their own file reference, but to the original file</span></div>
<div class="line">        $originalField-&gt;value-&gt;externalData[<span class="stringliteral">&#39;path&#39;</span>];</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b">getGateway</a>( $context )-&gt;storeFileReference( $versionInfo, $field );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_ab61b2841f29283d95c31174f10eca390_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_ab61b2841f29283d95c31174f10eca390_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_ab61b2841f29283d95c31174f10eca390_cgraph" id="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_ab61b2841f29283d95c31174f10eca390_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b" title="eZ\\Publish\\Core\\FieldType\l\\GatewayBasedStorage\\getGateway" alt="" coords="281,14,532,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a95f5d9c0d00ddf8250b1cf78cdb090b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::deleteFieldData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a>&#160;</td>
          <td class="paramname"><em>$versionInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$fieldIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes all referenced external data</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">VersionInfo</td><td class="paramname">$versionInfo</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$fieldIds</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1FieldType_1_1FieldStorage.html#a34a9e4f9dae8026dc2b76e0b561bfc67">eZ\Publish\SPI\FieldType\FieldStorage</a>.</p>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00202">202</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

<p>References <a class="el" href="IO_2IOService_8php_source.html#l00164">eZ\Publish\Core\IO\IOService\deleteBinaryFile()</a>, <a class="el" href="GatewayBasedStorage_8php_source.html#l00069">eZ\Publish\Core\FieldType\GatewayBasedStorage\getGateway()</a>, and <a class="el" href="IO_2IOService_8php_source.html#l00178">eZ\Publish\Core\IO\IOService\loadBinaryFile()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $gateway = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b">getGateway</a>( $context );</div>
<div class="line"></div>
<div class="line">        $referencedFiles = $gateway-&gt;getReferencedFiles( $fieldIds, $versionInfo-&gt;versionNo );</div>
<div class="line"></div>
<div class="line">        $gateway-&gt;removeFileReferences( $fieldIds, $versionInfo-&gt;versionNo );</div>
<div class="line"></div>
<div class="line">        $referenceCountMap = $gateway-&gt;countFileReferences( $referencedFiles );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> ( $referenceCountMap as $filePath =&gt; $count )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( $count === 0 )</div>
<div class="line">            {</div>
<div class="line">                $this-&gt;IOService-&gt;deleteBinaryFile(</div>
<div class="line">                    $this-&gt;IOService-&gt;loadBinaryFile( $filePath )</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a95f5d9c0d00ddf8250b1cf78cdb090b1_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a95f5d9c0d00ddf8250b1cf78cdb090b1_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a95f5d9c0d00ddf8250b1cf78cdb090b1_cgraph" id="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a95f5d9c0d00ddf8250b1cf78cdb090b1_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ac4fb1fb40bd90d89d86ab9d66a2b5f7e" title="eZ\\Publish\\Core\\IO\l\\IOService\\deleteBinaryFile" alt="" coords="312,5,501,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b" title="eZ\\Publish\\Core\\FieldType\l\\GatewayBasedStorage\\getGateway" alt="" coords="281,74,532,121"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ab952010e6dd650db82d14d3b8bbef586" title="eZ\\Publish\\Core\\IO\l\\IOService\\loadBinaryFile" alt="" coords="319,143,495,190"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#aaedd401c3e81173a235c47ba0c4fe732" title="eZ\\Publish\\Core\\IO\l\\IOService\\getPrefixedUri" alt="" coords="597,35,776,82"/><area shape="rect" id="node12" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ae8fe738d4bb773d36c84bead97b5ca00" title="eZ\\Publish\\Core\\IO\l\\IOService\\buildDomainBinary\lFileObject" alt="" coords="581,135,792,199"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af992f43e01424d39bef2b5e93ddf7f5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::getFieldData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a>&#160;</td>
          <td class="paramname"><em>$versionInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a>&#160;</td>
          <td class="paramname"><em>$field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Populates $field value property based on the external data. $field-&gt;value is a <a class="el" href="namespaceeZ.html">eZ</a> object. This value holds the data as a <a class="el" href="namespaceeZ.html">eZ</a> based object, according to the field type (e.g. for <a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1FieldType_1_1TextLine.html">TextLine</a>, it will be a <a class="el" href="namespaceeZ.html">eZ</a> object).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\Content\VersionInfo</td><td class="paramname">$versionInfo</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\Content\Field</td><td class="paramname">$field</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1FieldType_1_1FieldStorage.html#a1c36e4e0b2a3f59d135873cf02ee39e9">eZ\Publish\SPI\FieldType\FieldStorage</a>.</p>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00177">177</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

<p>References <a class="el" href="GatewayBasedStorage_8php_source.html#l00069">eZ\Publish\Core\FieldType\GatewayBasedStorage\getGateway()</a>, and <a class="el" href="IO_2IOService_8php_source.html#l00178">eZ\Publish\Core\IO\IOService\loadBinaryFile()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $field-&gt;value-&gt;externalData = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b">getGateway</a>( $context )-&gt;getFileReferenceData( $field-&gt;id, $versionInfo-&gt;versionNo );</div>
<div class="line">        <span class="keywordflow">if</span> ( $field-&gt;value-&gt;externalData !== null )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> ( ( $binaryFile = $this-&gt;IOService-&gt;loadBinaryFile( $field-&gt;value-&gt;externalData[<span class="stringliteral">&#39;path&#39;</span>] ) ) !== <span class="keyword">false</span> )</div>
<div class="line">            {</div>
<div class="line">                $field-&gt;value-&gt;externalData[<span class="stringliteral">&#39;fileSize&#39;</span>] = $binaryFile-&gt;size;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">throw</span> new \RuntimeException( <span class="stringliteral">&quot;Failed loading binary file {$field-&gt;value-&gt;externalData[&#39;path&#39;]}&quot;</span> );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_af992f43e01424d39bef2b5e93ddf7f5d_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_af992f43e01424d39bef2b5e93ddf7f5d_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_af992f43e01424d39bef2b5e93ddf7f5d_cgraph" id="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_af992f43e01424d39bef2b5e93ddf7f5d_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b" title="eZ\\Publish\\Core\\FieldType\l\\GatewayBasedStorage\\getGateway" alt="" coords="281,5,532,51"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ab952010e6dd650db82d14d3b8bbef586" title="eZ\\Publish\\Core\\IO\l\\IOService\\loadBinaryFile" alt="" coords="319,74,495,121"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#aaedd401c3e81173a235c47ba0c4fe732" title="eZ\\Publish\\Core\\IO\l\\IOService\\getPrefixedUri" alt="" coords="597,34,776,81"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ae8fe738d4bb773d36c84bead97b5ca00" title="eZ\\Publish\\Core\\IO\l\\IOService\\buildDomainBinary\lFileObject" alt="" coords="581,104,792,168"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a344e63f6bfd1280d24b9d43b5ce166fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::getIndexData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a>&#160;</td>
          <td class="paramname"><em>$versionInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a>&#160;</td>
          <td class="paramname"><em>$field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\Content\VersionInfo</td><td class="paramname">$versionInfo</td><td></td></tr>
    <tr><td class="paramtype">\eZ\Publish\SPI\Persistence\Content\Field</td><td class="paramname">$field</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1FieldType_1_1FieldStorage.html#acbe6f6a948f9a3ea9f174c3bbf84bba9">eZ\Publish\SPI\FieldType\FieldStorage</a>.</p>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00240">240</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line"></div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afcd466e1cb7e5cb79cf7d8c8425d2b52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::hasFieldData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks if field type has external data to deal with</p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1FieldType_1_1FieldStorage.html#a1765f7422c34ba5957296b8ac14f5cc9">eZ\Publish\SPI\FieldType\FieldStorage</a>.</p>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00228">228</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a217f86fdcaa21e917345043ed27e7fff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::removeOldFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fieldId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$versionNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes the old file referenced by $fieldId in $versionNo, if not referenced else where</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$fieldId</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$versionNo</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00142">142</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

<p>References <a class="el" href="IO_2IOService_8php_source.html#l00164">eZ\Publish\Core\IO\IOService\deleteBinaryFile()</a>, <a class="el" href="GatewayBasedStorage_8php_source.html#l00069">eZ\Publish\Core\FieldType\GatewayBasedStorage\getGateway()</a>, and <a class="el" href="IO_2IOService_8php_source.html#l00178">eZ\Publish\Core\IO\IOService\loadBinaryFile()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $gateway = $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b">getGateway</a>( $context );</div>
<div class="line"></div>
<div class="line">        $fileReference = $gateway-&gt;getFileReferenceData( $fieldId, $versionNo );</div>
<div class="line">        <span class="keywordflow">if</span> ( $fileReference === null )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// No previous file</span></div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $gateway-&gt;removeFileReference( $fieldId, $versionNo );</div>
<div class="line"></div>
<div class="line">        $fileCounts = $gateway-&gt;countFileReferences( array( $fileReference[<span class="stringliteral">&#39;path&#39;</span>] ) );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $fileCounts[$fileReference[<span class="stringliteral">&#39;path&#39;</span>]] === 0 )</div>
<div class="line">        {</div>
<div class="line">            $this-&gt;IOService-&gt;deleteBinaryFile(</div>
<div class="line">                $this-&gt;IOService-&gt;loadBinaryFile( $fileReference[<span class="stringliteral">&#39;path&#39;</span>] )</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_cgraph" id="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ac4fb1fb40bd90d89d86ab9d66a2b5f7e" title="eZ\\Publish\\Core\\IO\l\\IOService\\deleteBinaryFile" alt="" coords="312,5,501,51"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b" title="eZ\\Publish\\Core\\FieldType\l\\GatewayBasedStorage\\getGateway" alt="" coords="281,74,532,121"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ab952010e6dd650db82d14d3b8bbef586" title="eZ\\Publish\\Core\\IO\l\\IOService\\loadBinaryFile" alt="" coords="319,143,495,190"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#aaedd401c3e81173a235c47ba0c4fe732" title="eZ\\Publish\\Core\\IO\l\\IOService\\getPrefixedUri" alt="" coords="597,35,776,82"/><area shape="rect" id="node12" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ae8fe738d4bb773d36c84bead97b5ca00" title="eZ\\Publish\\Core\\IO\l\\IOService\\buildDomainBinary\lFileObject" alt="" coords="581,135,792,199"/></map>
</div>
</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_icgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_icgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_icgraph" id="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_a217f86fdcaa21e917345043ed27e7fff_icgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#aad8a40fd82782f4fa7dce60d1b1ea867" title="eZ\\Publish\\Core\\FieldType\l\\BinaryBase\\BinaryBaseStorage\l\\storeFieldData" alt="" coords="281,5,505,69"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aad8a40fd82782f4fa7dce60d1b1ea867"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::storeFieldData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1VersionInfo.html">VersionInfo</a>&#160;</td>
          <td class="paramname"><em>$versionInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classeZ_1_1Publish_1_1SPI_1_1Persistence_1_1Content_1_1Field.html">Field</a>&#160;</td>
          <td class="paramname"><em>$field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allows custom field types to store data in an external source (e.g. another DB table).</p>
<p>Stores value for $field in an external data source. The whole <a class="el" href="namespaceeZ.html">eZ</a> ValueObject is passed and its value is accessible through the <a class="el" href="namespaceeZ.html">eZ</a> 'value' property. This value holds the data filled by the user as a <a class="el" href="namespaceeZ.html">eZ</a> based object, according to the field type (e.g. for <a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1FieldType_1_1TextLine.html">TextLine</a>, it will be a <a class="el" href="namespaceeZ.html">eZ</a> object).</p>
<p>$field-&gt;id = unique ID from the attribute tables (needs to be generated by database back end on create, before the external data source may be called from storing).</p>
<p>The context array provides some context for the field handler about the currently used storage engine. The array should at least define 2 keys :</p>
<ul>
<li>identifier (connection identifier)</li>
<li>connection (the connection handler) For example, using Legacy storage engine, $context will be:</li>
<li>identifier = 'LegacyStorage'</li>
<li>connection = eZ\Publish\Core\Persistence\Legacy\EzcDbHandlerobjecthandler(forDBconnection),tobeusedaccordinglyto@linkhttp://incubator.apache.org/zetacomponents/documentation/trunk/Database/tutorial.htmlezcDatabaseusage@param\eZ\Publish\SPI\Persistence\Content\VersionInfo$versionInfo@param\eZ\Publish\SPI\Persistence\Content\Field$field@paramarray$context@returnvoid</li>
</ul>

<p>Implements <a class="el" href="interfaceeZ_1_1Publish_1_1SPI_1_1FieldType_1_1FieldStorage.html#aa4b0d997b56dda460c1c35175b84f8ea">eZ\Publish\SPI\FieldType\FieldStorage</a>.</p>

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00084">84</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

<p>References <a class="el" href="IO_2IOService_8php_source.html#l00133">eZ\Publish\Core\IO\IOService\createBinaryFile()</a>, <a class="el" href="GatewayBasedStorage_8php_source.html#l00069">eZ\Publish\Core\FieldType\GatewayBasedStorage\getGateway()</a>, <a class="el" href="IO_2IOService_8php_source.html#l00178">eZ\Publish\Core\IO\IOService\loadBinaryFile()</a>, <a class="el" href="IO_2IOService_8php_source.html#l00101">eZ\Publish\Core\IO\IOService\newBinaryCreateStructFromLocalFile()</a>, and <a class="el" href="BinaryBaseStorage_8php_source.html#l00142">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage\removeOldFile()</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ( $field-&gt;value-&gt;externalData === null )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Nothing to store</span></div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// no mimeType means we are dealing with an input, local file</span></div>
<div class="line">        <span class="keywordflow">if</span> ( !isset( $field-&gt;value-&gt;externalData[<span class="stringliteral">&#39;mimeType&#39;</span>] ) )</div>
<div class="line">        {</div>
<div class="line">            $field-&gt;value-&gt;externalData[<span class="stringliteral">&#39;mimeType&#39;</span>] = $this-&gt;mimeTypeDetector-&gt;getFromPath( $field-&gt;value-&gt;externalData[<span class="stringliteral">&#39;path&#39;</span>] );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $storedValue = $field-&gt;value-&gt;externalData;</div>
<div class="line">        $storagePath = $this-&gt;pathGenerator-&gt;getStoragePathForField( $field, $versionInfo );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// The file referenced in externalData MAY be an existing IOService file which we can use</span></div>
<div class="line">        <span class="keywordflow">if</span> ( ( $this-&gt;IOService-&gt;loadBinaryFile( $storedValue[<span class="stringliteral">&#39;path&#39;</span>] ) === false ) &amp;&amp;</div>
<div class="line">             ( $this-&gt;IOService-&gt;loadBinaryFile( $storagePath ) === false ) )</div>
<div class="line">        {</div>
<div class="line">            $createStruct = $this-&gt;IOService-&gt;newBinaryCreateStructFromLocalFile(</div>
<div class="line">                $storedValue[<span class="stringliteral">&#39;path&#39;</span>]</div>
<div class="line">            );</div>
<div class="line">            $createStruct-&gt;uri = $storagePath;</div>
<div class="line">            $this-&gt;IOService-&gt;createBinaryFile( $createStruct );</div>
<div class="line">            $storedValue[<span class="stringliteral">&#39;path&#39;</span>] = $createStruct-&gt;uri;</div>
<div class="line">            $storedValue[<span class="stringliteral">&#39;mimeType&#39;</span>] = $createStruct-&gt;mimeType;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $field-&gt;value-&gt;externalData = $storedValue;</div>
<div class="line"></div>
<div class="line">        $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a217f86fdcaa21e917345043ed27e7fff">removeOldFile</a>( $field-&gt;id, $versionInfo-&gt;versionNo, $context );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b">getGateway</a>( $context )-&gt;storeFileReference( $versionInfo, $field );</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_aad8a40fd82782f4fa7dce60d1b1ea867_cgraph.png" border="0" usemap="#classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_aad8a40fd82782f4fa7dce60d1b1ea867_cgraph" alt=""/></div>
<map name="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_aad8a40fd82782f4fa7dce60d1b1ea867_cgraph" id="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage_aad8a40fd82782f4fa7dce60d1b1ea867_cgraph">
<area shape="rect" id="node3" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#a8ec0fa3b0ac48ea7de876999f6387407" title="eZ\\Publish\\Core\\IO\l\\IOService\\createBinaryFile" alt="" coords="299,49,488,95"/><area shape="rect" id="node11" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1GatewayBasedStorage.html#ae3d32c56c1ce666534c10f0fedae806b" title="eZ\\Publish\\Core\\FieldType\l\\GatewayBasedStorage\\getGateway" alt="" coords="556,266,807,313"/><area shape="rect" id="node13" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ab952010e6dd650db82d14d3b8bbef586" title="eZ\\Publish\\Core\\IO\l\\IOService\\loadBinaryFile" alt="" coords="593,127,769,174"/><area shape="rect" id="node17" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#af8c3f8a25c2007f3e68364b78a608183" title="eZ\\Publish\\Core\\IO\l\\IOService\\newBinaryCreate\lStructFromLocalFile" alt="" coords="295,327,492,391"/><area shape="rect" id="node19" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html#a217f86fdcaa21e917345043ed27e7fff" title="eZ\\Publish\\Core\\FieldType\l\\BinaryBase\\BinaryBaseStorage\l\\removeOldFile" alt="" coords="281,188,505,252"/><area shape="rect" id="node5" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#afe3faf30e7890fe958e2aa508128b24b" title="eZ\\Publish\\Core\\IO\l\\IOService\\buildSPIBinaryFile\lCreateStructObject" alt="" coords="581,40,781,104"/><area shape="rect" id="node9" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ae8fe738d4bb773d36c84bead97b5ca00" title="eZ\\Publish\\Core\\IO\l\\IOService\\buildDomainBinary\lFileObject" alt="" coords="856,5,1067,69"/><area shape="rect" id="node7" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#aaedd401c3e81173a235c47ba0c4fe732" title="eZ\\Publish\\Core\\IO\l\\IOService\\getPrefixedUri" alt="" coords="872,127,1051,174"/><area shape="rect" id="node21" href="classeZ_1_1Publish_1_1Core_1_1IO_1_1IOService.html#ac4fb1fb40bd90d89d86ab9d66a2b5f7e" title="eZ\\Publish\\Core\\IO\l\\IOService\\deleteBinaryFile" alt="" coords="587,197,776,243"/></map>
</div>
</p>

</div>
</div>
<h2>Member Data Documentation</h2>
<a class="anchor" id="a8e88d1b3319a3066b09c3f48b0edfc50"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::$IOService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00029">29</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

</div>
</div>
<a class="anchor" id="a464eb9fd6595aeed8bc570164a025a48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::$mimeTypeDetector</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00037">37</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1afdd0db82346acbe6b145d142b4e8d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">eZ\Publish\Core\FieldType\BinaryBase\BinaryBaseStorage::$pathGenerator</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="BinaryBaseStorage_8php_source.html#l00032">32</a> of file <a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/var/lib/jenkins/jobs/PAPI-doxygen-master/workspace/eZ/Publish/Core/FieldType/BinaryBase/<a class="el" href="BinaryBaseStorage_8php_source.html">BinaryBaseStorage.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceeZ.html">eZ</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish.html">Publish</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core.html">Core</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1FieldType.html">FieldType</a></li><li class="navelem"><a class="el" href="namespaceeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase.html">BinaryBase</a></li><li class="navelem"><a class="el" href="classeZ_1_1Publish_1_1Core_1_1FieldType_1_1BinaryBase_1_1BinaryBaseStorage.html">BinaryBaseStorage</a></li>
    <li class="footer">Generated on Mon Apr 8 2013 14:50:53 for ezp-next by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
